'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _always2 = require('ramda/src/always');

var _always3 = _interopRequireDefault(_always2);

var _drop2 = require('ramda/src/drop');

var _drop3 = _interopRequireDefault(_drop2);

var _indexOf2 = require('ramda/src/indexOf');

var _indexOf3 = _interopRequireDefault(_indexOf2);

var _gte2 = require('ramda/src/gte');

var _gte3 = _interopRequireDefault(_gte2);

var _last2 = require('ramda/src/last');

var _last3 = _interopRequireDefault(_last2);

var _head2 = require('ramda/src/head');

var _head3 = _interopRequireDefault(_head2);

var _assoc2 = require('ramda/src/assoc');

var _assoc3 = _interopRequireDefault(_assoc2);

var _split2 = require('ramda/src/split');

var _split3 = _interopRequireDefault(_split2);

var _map2 = require('ramda/src/map');

var _map3 = _interopRequireDefault(_map2);

var _reduce2 = require('ramda/src/reduce');

var _reduce3 = _interopRequireDefault(_reduce2);

var _compose2 = require('ramda/src/compose');

var _compose3 = _interopRequireDefault(_compose2);

var _decode = require('./decode');

var _decode2 = _interopRequireDefault(_decode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// querystring -> object
exports.default = function (s) {
  return (0, _compose3.default)((0, _reduce3.default)(function (query, param) {
    var arr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (0, _compose3.default)((0, _map3.default)(_decode2.default), (0, _split3.default)('='))(param);
    return (0, _assoc3.default)((0, _head3.default)(arr), (0, _last3.default)(arr), query);
  }, {}), (0, _split3.default)('&'), (0, _gte3.default)((0, _indexOf3.default)('?', s), 0) ? (0, _drop3.default)(1) : (0, _always3.default)(s))(s);
};