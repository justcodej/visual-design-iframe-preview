"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useDeepEffect = useDeepEffect;

var _react = require("react");

var _lodash = require("lodash");

function useDeepEffect(fn, deps) {
  var isFirst = (0, _react.useRef)(true);
  var prevDeps = (0, _react.useRef)(deps);
  (0, _react.useEffect)(function () {
    var isFirstEffect = isFirst.current;
    var isSame = prevDeps.current.every(function (obj, index) {
      return (0, _lodash.isEqual)(obj, deps[index]);
    });
    isFirst.current = false;
    prevDeps.current = deps;

    if (isFirstEffect || !isSame) {
      return fn();
    }
  }, [deps, fn]);
}