!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react-is")):"function"==typeof define&&define.amd?define("formily.antd",["exports","react-is"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Formily=e.Formily||{},e.Formily.Antd={}))}(this,(function(e){"use strict";!function(){const e={NODE_ENV:"production"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function a(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){d(e,t,n[t])}))}return e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function E(e){var t={exports:{}};return e(t,t.exports),t.exports}var S=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;function O(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var k=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=O(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))F.call(n,a)&&(o[a]=n[a]);if(S){r=S(n);for(var l=0;l<r.length;l++)C.call(n,r[l])&&(o[r[l]]=n[r[l]])}}return o},T=Function.call.bind(Object.prototype.hasOwnProperty),P="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N=T,A=function(){};if("production"!==process.env.NODE_ENV){var _=P,I={},M=N;A=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function j(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(M(e,i)){var a;try{if("function"!=typeof e[i]){var l=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}a=e[i](t,i,r,n,null,_)}catch(e){a=e}if(!a||a instanceof Error||A((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in I)){I[a.message]=!0;var c=o?o():"";A("Failed "+n+" type: "+a.message+(null!=c?c:""))}}}j.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(I={})};const B=ReactIs;var D=j,z=function(){};function L(){return null}"production"!==process.env.NODE_ENV&&(z=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function W(){}function V(){}V.resetWarningCache=W;var X=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator;var r="<<anonymous>>",o={array:c("array"),bigint:c("bigint"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:l(L),arrayOf:function(e){return l((function(t,n,r,o,i){if("function"!=typeof e)return new a("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var l=t[n];if(!Array.isArray(l))return new a("Invalid "+o+" `"+i+"` of type `"+d(l)+"` supplied to `"+r+"`, expected an array.");for(var c=0;c<l.length;c++){var s=e(l,c,r,o,i+"["+c+"]",P);if(s instanceof Error)return s}return null}))},element:l((function(t,n,r,o,i){var l=t[n];return e(l)?null:new a("Invalid "+o+" `"+i+"` of type `"+d(l)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:l((function(e,t,n,r,o){var i=e[t];return B.isValidElementType(i)?null:new a("Invalid "+r+" `"+o+"` of type `"+d(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,n,o,i,l){if(!(t[n]instanceof e)){var c=e.name||r;return new a("Invalid "+i+" `"+l+"` of type `"+(((s=t[n]).constructor&&s.constructor.name?s.constructor.name:r)+"` supplied to `")+o+"`, expected instance of `"+c+"`.")}var s;return null}))},node:l((function(e,t,n,r,o){return u(e[t])?null:new a("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,n,r,o,i){if("function"!=typeof e)return new a("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var s in l)if(N(l,s)){var u=e(l,s,r,o,i+"."+s,P);if(u instanceof Error)return u}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&z(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),L;function t(t,n,r,o,l){for(var c=t[n],s=0;s<e.length;s++)if(i(c,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===f(t)?String(t):t}));return new a("Invalid "+o+" `"+l+"` of value `"+String(c)+"` supplied to `"+r+"`, expected one of "+u+".")}return l(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&z("Invalid argument supplied to oneOfType, expected an instance of array."),L;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return z("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+m(n)+" at index "+t+"."),L}return l((function(t,n,r,o,i){for(var l=[],c=0;c<e.length;c++){var s=(0,e[c])(t,n,r,o,i,P);if(null==s)return null;s.data&&N(s.data,"expectedType")&&l.push(s.data.expectedType)}return new a("Invalid "+o+" `"+i+"` supplied to `"+r+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")}))},shape:function(e){return l((function(t,n,r,o,i){var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var m=e[u];if("function"!=typeof m)return s(r,o,i,u,f(m));var p=m(l,u,r,o,i+"."+u,P);if(p)return p}return null}))},exact:function(e){return l((function(t,n,r,o,i){var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=k({},t[n],e);for(var m in u){var p=e[m];if(N(e,m)&&"function"!=typeof p)return s(r,o,i,m,f(p));if(!p)return new a("Invalid "+o+" `"+i+"` key `"+m+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var v=p(l,m,r,o,i+"."+m,P);if(v)return v}return null}))}};function i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function a(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function l(e){if("production"!==process.env.NODE_ENV)var n={},o=0;function i(i,l,c,s,u,d,f){if(s=s||r,d=d||c,f!==P){if(t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var p=s+":"+c;!n[p]&&o<3&&(z("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[p]=!0,o++)}}return null==l[c]?i?null===l[c]?new a("The "+u+" `"+d+"` is marked as required in `"+s+"`, but its value is `null`."):new a("The "+u+" `"+d+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(l,c,s,u,d)}var l=i.bind(null,!1);return l.isRequired=i.bind(null,!0),l}function c(e){return l((function(t,n,r,o,i,l){var c=t[n];return d(c)!==e?new a("Invalid "+o+" `"+i+"` of type `"+f(c)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function s(e,t,n,r,o){return new a((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function u(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(u);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!u(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!u(a[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function f(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function m(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return a.prototype=Error.prototype,o.checkPropTypes=D,o.resetWarningCache=D.resetWarningCache,o.PropTypes=o,o},H=function(){function e(e,t,n,r,o,i){if(i!==P){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:V,resetWarningCache:W};return n.PropTypes=n,n},G=E((function(e){if("production"!==process.env.NODE_ENV){var t=B;e.exports=X(t.isElement,!0)}else e.exports=H()})),K=process.env.NODE_ENV,Y=function(e,t,n,r,o,i,a,l){if("production"!==K&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,l],u=0;(c=new Error(t.replace(/%s/g,(function(){return s[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}};function q(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=function(){function e(){m(this,e),d(this,"refs",{})}return v(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(J)}}]),e}();function J(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Q(e,t){return Object.keys(e).reduce((function(n,r){return-1===t.indexOf(r)&&(n[r]=e[r]),n}),{})}var $={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Z=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function ee(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function te(e,t){e.style["".concat(Z,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function ne(e,t){e.style["".concat(Z,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function re(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function oe(e,t,n){return Math.max(e,Math.min(n,t))}function ie(e){return"px"===e.substr(-2)?parseFloat(e):0}function ae(e){var t=window.getComputedStyle(e);return{bottom:ie(t.marginBottom),left:ie(t.marginLeft),right:ie(t.marginRight),top:ie(t.marginTop)}}function le(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function ce(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function se(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function ue(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:de(e.parentNode,t,r)}}function fe(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}function me(e){var t=e.lockOffset,n=e.width,r=e.height,o=t,i=t,a="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Y(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),o=parseFloat(t),i=parseFloat(t),a=l[1]}return Y(isFinite(o)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(o=o*n/100,i=i*r/100),{x:o,y:i}}function pe(e){var t=e.height,n=e.width,r=e.lockOffset,o=Array.isArray(r)?r:[r,r];Y(2===o.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var i=u(o,2),a=i[0],l=i[1];return[me({height:t,lockOffset:a,width:n}),me({height:t,lockOffset:l,width:n})]}function ve(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:ve(e.parentNode):null}function he(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:ie(t.gridColumnGap),y:ie(t.gridRowGap)}:{x:0,y:0}}var ye=27,ge=32,be=37,Re=38,we=39,xe=40,Ee="A",Se="BUTTON",Fe="CANVAS",Ce="INPUT",Oe="OPTION",ke="TEXTAREA",Te="SELECT";function Pe(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return q(r.querySelectorAll(t)).forEach((function(e,t){("file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===Fe&&n[t].width>0&&n[t].height>0)&&e.getContext("2d").drawImage(n[t],0,0)})),r}function Ne(e){return null!=e.sortableHandle}var Ae=function(){function e(t,n){m(this,e),this.container=t,this.onScrollCallback=n}return v(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,o=e.maxTranslate,i=e.width,a=e.height,l={x:0,y:0},c={x:1,y:1},s=10,u=10,d=this.container,f=d.scrollTop,m=d.scrollLeft,p=d.scrollHeight,v=d.scrollWidth,h=0===f,y=p-f-d.clientHeight==0,g=0===m,b=v-m-d.clientWidth==0;n.y>=o.y-a/2&&!y?(l.y=1,c.y=u*Math.abs((o.y-a/2-n.y)/a)):n.x>=o.x-i/2&&!b?(l.x=1,c.x=s*Math.abs((o.x-i/2-n.x)/i)):n.y<=r.y+a/2&&!h?(l.y=-1,c.y=u*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+i/2&&!g&&(l.x=-1,c.x=s*Math.abs((n.x-i/2-r.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:c.x*l.x,top:c.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}();var _e={axis:G.oneOf(["x","y","xy"]),contentWindow:G.any,disableAutoscroll:G.bool,distance:G.number,getContainer:G.func,getHelperDimensions:G.func,helperClass:G.string,helperContainer:G.oneOfType([G.func,"undefined"==typeof HTMLElement?G.any:G.instanceOf(HTMLElement)]),hideSortableGhost:G.bool,keyboardSortingTransitionDuration:G.number,lockAxis:G.string,lockOffset:G.oneOfType([G.number,G.string,G.arrayOf(G.oneOfType([G.number,G.string]))]),lockToContainerEdges:G.bool,onSortEnd:G.func,onSortMove:G.func,onSortOver:G.func,onSortStart:G.func,pressDelay:G.number,pressThreshold:G.number,keyCodes:G.shape({lift:G.arrayOf(G.number),drop:G.arrayOf(G.number),cancel:G.arrayOf(G.number),up:G.arrayOf(G.number),down:G.arrayOf(G.number)}),shouldCancelStart:G.func,transitionDuration:G.number,updateBeforeSortStart:G.func,useDragHandle:G.bool,useWindowAsScrollContainer:G.bool},Ie={lift:[ge],drop:[ge],cancel:[ye],up:[Re,be],down:[xe,we]},Me={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Ie,shouldCancelStart:function(e){return-1!==[Ce,ke,Te,Oe,Se].indexOf(e.target.tagName)||!!re(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},je=Object.keys(_e);function Be(e){Y(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function De(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}function ze(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return m(this,n),d(y(y(t=g(this,b(n).call(this,e)))),"state",{}),d(y(y(t)),"handleStart",(function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2!==e.button&&!o(e)){t.touched=!0,t.position=se(e);var i=re(e.target,(function(e){return null!=e.sortableInfo}));if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,l=i.sortableInfo,c=l.index,s=l.collection;if(l.disabled)return;if(a&&!re(e.target,Ne))return;t.manager.active={collection:s,index:c},ue(e)||e.target.tagName!==Ee||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),d(y(y(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),d(y(y(t)),"handleMove",(function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=se(e),a={x:t.position.x-i.x,y:t.position.y-i.y},l=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||o&&!(l>=o)?r&&l>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),d(y(y(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),d(y(y(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),d(y(y(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r=function(){var n=m.sortableInfo.index,r=ae(m),o=he(t.container),s=t.scrollContainer.getBoundingClientRect(),h=a({index:n,node:m,collection:p});if(t.node=m,t.margin=r,t.gridGap=o,t.width=h.width,t.height=h.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=m.getBoundingClientRect(),t.containerBoundingRect=s,t.index=n,t.newIndex=n,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=de(m,t.container),t.initialOffset=se(v?f({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(Pe(m)),ee(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-r.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-r.top,"px"),width:"".concat(t.width,"px")}),v&&t.helper.focus(),c&&(t.sortableGhost=m,ee(m,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},v){var y=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,g=y.top,b=y.left,R=y.width,w=g+y.height,x=b+R;t.axis.x&&(t.minTranslate.x=b-t.boundingClientRect.left,t.maxTranslate.x=x-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=g-t.boundingClientRect.top,t.maxTranslate.y=w-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:s.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:s.left+s.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:s.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:s.top+s.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?m:t.contentWindow,v?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):($.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),$.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:n}),u&&u({node:m,index:n,collection:p,isKeySorting:v,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),v&&t.keyMove(0)},o=t.props,i=o.axis,a=o.getHelperDimensions,l=o.helperClass,c=o.hideSortableGhost,s=o.updateBeforeSortStart,u=o.onSortStart,d=o.useWindowAsScrollContainer,m=n.node,p=n.collection,v=t.manager.isKeySorting,h=function(){if("function"==typeof s){t._awaitingUpdateBeforeSortStart=!0;var n=De((function(){var t=m.sortableInfo.index;return Promise.resolve(s({collection:p,index:t,node:m,isKeySorting:v},e)).then((function(){}))}),(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return h&&h.then?h.then(r):r()}}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),d(y(y(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),d(y(y(t)),"handleSortEnd",(function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd,i=t.manager,a=i.active.collection,l=i.isKeySorting,c=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):($.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),$.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&ee(t.sortableGhost,{opacity:"",visibility:""});for(var s=0,u=c.length;s<u;s++){var d=c[s],f=d.node;d.edgeOffset=null,d.boundingClientRect=null,te(f,null),ne(f,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:c},e),t.touched=!1})),d(y(y(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=f({},t.translate),o=0,i=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),o=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-r.y),t.translate=r,te(t.helper,t.translate),t.scrollContainer.scrollLeft+=o,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),d(y(y(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),d(y(y(t)),"handleKeyDown",(function(e){var n=e.keyCode,r=t.props,o=r.shouldCancelStart,i=r.keyCodes,a=f({},Ie,void 0===i?{}:i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||a.lift.includes(n)&&!o(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(n)&&!t.manager.active?t.keyLift(e):a.drop.includes(n)&&t.manager.active?t.keyDrop(e):a.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(n)?t.keyMove(-1):a.down.includes(n)&&t.keyMove(1))})),d(y(y(t)),"keyLift",(function(e){var n=e.target,r=re(n,(function(e){return null!=e.sortableInfo})).sortableInfo,o=r.index,i=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:o,collection:i},t.handlePress(e)})),d(y(y(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,o=t.newIndex+e,i=t.newIndex;if(!(o<0||o>r)){t.prevIndex=i,t.newIndex=o;var a=fe(t.newIndex,t.prevIndex,t.index),l=n.find((function(e){return e.node.sortableInfo.index===a})),c=l.node,s=t.containerScrollDelta,u=l.boundingClientRect||ce(c,s),d=l.translate||{x:0,y:0},f=u.top+d.y-s.top,m=u.left+d.x-s.left,p=i<o,v=p&&t.axis.x?c.offsetWidth-t.width:0,h=p&&t.axis.y?c.offsetHeight-t.height:0;t.handleSortMove({pageX:m+v,pageY:f+h,ignoreTransition:0===e})}})),d(y(y(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),d(y(y(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),d(y(y(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,r=e.target,o=re(r,(function(e){return null!=e.sortableInfo}));return o&&o.sortableInfo&&!o.sortableInfo.disabled&&(n?Ne(r):r.sortableInfo)})),Be(e),t.manager=new U,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return w(n,React.Component),v(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:ve(e.container)||e.container,e.autoScroller=new Ae(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return $[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return $[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,o=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,l=void 0===a?i:a,c=this.manager.isKeySorting,s=e.ignoreTransition,d=se(e),f={x:d.x-this.initialOffset.x,y:d.y-this.initialOffset.y};if(f.y-=window.pageYOffset-this.initialWindowScroll.top,f.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=f,o){var m=u(pe({height:this.height,lockOffset:r,width:this.width}),2),p=m[0],v=m[1],h={x:this.width/2-p.x,y:this.height/2-p.y},y={x:this.width/2-v.x,y:this.height/2-v.y};f.x=oe(this.minTranslate.x+h.x,this.maxTranslate.x-y.x,f.x),f.y=oe(this.minTranslate.y+h.y,this.maxTranslate.y-y.y,f.y)}"x"===n?f.y=0:"y"===n&&(f.x=0),c&&l&&!s&&ne(this.helper,l),te(this.helper,f)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,o=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+o.left,c=this.offsetEdge.top+this.translate.y+o.top,s=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,f=a.length;d<f;d++){var m=a[d].node,p=m.sortableInfo.index,v=m.offsetWidth,h=m.offsetHeight,y={height:this.height>h?h/2:this.height/2,width:this.width>v?v/2:this.width/2},g=s&&p>this.index&&p<=u,b=s&&p<this.index&&p>=u,R={x:0,y:0},w=a[d].edgeOffset;w||(w=de(m,this.container),a[d].edgeOffset=w,s&&(a[d].boundingClientRect=ce(m,o)));var x=d<a.length-1&&a[d+1],E=d>0&&a[d-1];x&&!x.edgeOffset&&(x.edgeOffset=de(x.node,this.container),s&&(x.boundingClientRect=ce(x.node,o))),p!==this.index?(t&&ne(m,t),this.axis.x?this.axis.y?b||p<this.index&&(l+i.left-y.width<=w.left&&c+i.top<=w.top+y.height||c+i.top+y.height<=w.top)?(R.x=this.width+this.marginOffset.x,w.left+R.x>this.containerBoundingRect.width-y.width&&x&&(R.x=x.edgeOffset.left-w.left,R.y=x.edgeOffset.top-w.top),null===this.newIndex&&(this.newIndex=p)):(g||p>this.index&&(l+i.left+y.width>=w.left&&c+i.top+y.height>=w.top||c+i.top+y.height>=w.top+h))&&(R.x=-(this.width+this.marginOffset.x),w.left+R.x<this.containerBoundingRect.left+y.width&&E&&(R.x=E.edgeOffset.left-w.left,R.y=E.edgeOffset.top-w.top),this.newIndex=p):g||p>this.index&&l+i.left+y.width>=w.left?(R.x=-(this.width+this.marginOffset.x),this.newIndex=p):(b||p<this.index&&l+i.left<=w.left+y.width)&&(R.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=p)):this.axis.y&&(g||p>this.index&&c+i.top+y.height>=w.top?(R.y=-(this.height+this.marginOffset.y),this.newIndex=p):(b||p<this.index&&c+i.top<=w.top+y.height)&&(R.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=p))),te(m,R),a[d].translate=R):n&&(this.sortableGhost=m,ee(m,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),s&&(this.newIndex=u);var S=s?this.prevIndex:u;r&&this.newIndex!==S&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:S,isKeySorting:s,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Y(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?ReactDOM.findDOMNode(this):e(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return React.createElement(e,l({ref:t},Q(this.props,je)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(),d(t,"displayName",le("sortableList",e)),d(t,"defaultProps",Me),d(t,"propTypes",_e),d(t,"childContextTypes",{manager:G.object.isRequired}),n}var Le={index:G.number.isRequired,collection:G.oneOfType([G.number,G.string]),disabled:G.bool},We=Object.keys(Le);function Ve(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return m(this,n),g(this,b(n).apply(this,arguments))}return w(n,React.Component),v(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,o=ReactDOM.findDOMNode(this);o.sortableInfo={collection:t,disabled:n,index:r,manager:this.context.manager},this.node=o,this.ref={node:o},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return Y(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return React.createElement(e,l({ref:t},Q(this.props,We)))}}]),n}(),d(t,"displayName",le("sortableElement",e)),d(t,"contextTypes",{manager:G.object.isRequired}),d(t,"propTypes",Le),d(t,"defaultProps",{collection:0}),n}var Xe=function(e,t){return Array.isArray(e)?e.map((function(e){return moment(e,t)})):e?moment(e,t):e},He=function(e,t,n){var r=function(e,t,r){if(void 0===r&&(r=0),!e)return n;if(Formily.Shared.isArr(t)){var o=t[r];return Formily.Shared.isFn(o)?o(e):Formily.Shared.isEmpty(o)?e:moment(e).format(o)}return Formily.Shared.isFn(t)?t(e):Formily.Shared.isEmpty(t)?e:moment(e).format(t)};return Formily.Shared.isArr(e)?e.map((function(e,n){return r(e,t,n)})):e?r(e,t):e||n};var Ge,Ke=function(e,t){var n;if("ConfigContext"in antd.ConfigProvider)return(0,React.useContext(antd.ConfigProvider.ConfigContext).getPrefixCls)(e,null==t?void 0:t.prefixCls);var r=null!==(n=null==t?void 0:t.prefixCls)&&void 0!==n?n:"ant-";return"".concat(r).concat(null!=e?e:"")},Ye=t({},ReactDOM),qe=Ye.version,Ue=Ye.render,Je=Ye.unmountComponentAtNode;try{Number((qe||"").split(".")[0])>=18&&Ye.createRoot&&(Ge=Ye.createRoot)}catch(e){}function Qe(e){var t=Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"==typeof t&&(t.usingClientEntryPoint=e)}var $e="__antd_mobile_root__";function Ze(e,t){Ge?function(e,t){Qe(!0);var n=t[$e]||Ge(t);Qe(!1),n.render(e),t[$e]=n}(e,t):function(e,t){Ue(e,t)}(e,t)}function et(e){return Ge?function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,Promise.resolve().then((function(){var t;null===(t=e[$e])||void 0===t||t.unmount(),delete e[$e]}))]}))}))}(e):function(e){return Je(e)}(e)}var tt=Formily.Reactive.observable(new Map),nt=function(e){var t=function(e){return e.id&&!tt.has(e.id)&&tt.set(e.id,null),React.createElement(React.Fragment,null,e.children,React.createElement(Formily.React.Observer,null,(function(){if(!e.id)return null;var t=tt.get(e.id);return t?ReactDOM.createPortal(t,document.body):null})))};return t.defaultProps={id:e},t};function rt(e,t){return{render:function(n){tt.has(t)?tt.set(t,null==n?void 0:n()):e&&Ze(React.createElement(React.Fragment,null,null==n?void 0:n()),e)},unmount:function(){var n;tt.has(t)&&tt.set(t,null),e&&et(e)&&e.parentNode&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}}}var ot=function(e,t){return void 0===e&&(e="Loading..."),r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:n=null,r=setTimeout((function(){n=antd.message.loading(e)}),100),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,t()];case 2:return[2,o.sent()];case 3:return null==n||n(),clearTimeout(r),[7];case 4:return[2]}}))}))},it=function(e){void 0===e&&(e={});var t={};for(var n in e)n.indexOf("data-")>-1&&(t[n]=e[n]);return t},at=E((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&e.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var l in o)t.call(o,l)&&o[l]&&e.push(l);else e.push(o.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),lt=React.createContext(null),ct=React.createContext(null),st=function(e){return"function"==typeof e?e():e},ut=function(){return React.useContext(lt)},dt=function(e){var t=React.useContext(ct);return t?t.index:e},ft=function(e){if("array"===(null==e?void 0:e.type))return[];if("object"===(null==e?void 0:e.type))return{};if("void"===(null==e?void 0:e.type))for(var t in e.properties){var n=ft(e.properties[t]);if(Formily.Shared.isValid(n))return n}},mt=function(e){var t=Formily.React.useField(),n=Formily.React.useFieldSchema();return React.createElement(Formily.React.RecordsScope,{getRecords:function(){return t.value}},React.createElement(lt.Provider,{value:{field:t,schema:n,props:e}},e.children))};mt.Item=function(e){var t=e.children,r=n(e,["children"]);return React.createElement(ct.Provider,{value:r},React.createElement(Formily.React.RecordScope,{getIndex:function(){return r.index},getRecord:function(){return st(r.record)}},t))};var pt=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return m(this,n),g(this,b(n).apply(this,arguments))}return w(n,React.Component),v(n,[{key:"componentDidMount",value:function(){ReactDOM.findDOMNode(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Y(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return React.createElement(e,l({ref:t},this.props))}}]),n}(),d(t,"displayName",le("sortableHandle",e)),n}((function(e){var n=Ke("formily-array-base");return React.createElement(icons.MenuOutlined,t({},e,{className:at("".concat(n,"-sort-handle"),e.className),style:t({},e.style)}))}));mt.SortHandle=function(e){var n,r=ut();return r?"editable"!==(null===(n=r.field)||void 0===n?void 0:n.pattern)?null:React.createElement(pt,t({},e)):null},mt.Index=function(e){var n=dt(),r=Ke("formily-array-base");return React.createElement("span",t({},e,{className:"".concat(r,"-index")}),"#",n+1,".")},mt.Addition=function(e){var n,r,o=Formily.React.useField(),i=ut(),a=Ke("formily-array-base");return i?"editable"!==(null===(n=i.field)||void 0===n?void 0:n.pattern)&&"disabled"!==(null===(r=i.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"dashed",block:!0},e,{disabled:null==o?void 0:o.disabled,className:at("".concat(a,"-addition"),e.className),onClick:function(t){var n,r,o,a,l,c,s,u,d,f,m;if(!(null===(n=i.props)||void 0===n?void 0:n.disabled)){var p=function(e,t){return Formily.Shared.isValid(e)?Formily.Shared.clone(e):Array.isArray(null==t?void 0:t.items)?ft(t.items[0]):ft(t.items)}(e.defaultValue,i.schema);"unshift"===e.method?(null===(o=null===(r=i.field)||void 0===r?void 0:r.unshift)||void 0===o||o.call(r,p),null===(l=null===(a=i.props)||void 0===a?void 0:a.onAdd)||void 0===l||l.call(a,0)):(null===(s=null===(c=i.field)||void 0===c?void 0:c.push)||void 0===s||s.call(c,p),null===(d=null===(u=i.props)||void 0===u?void 0:u.onAdd)||void 0===d||d.call(u,(null===(m=null===(f=null==i?void 0:i.field)||void 0===f?void 0:f.value)||void 0===m?void 0:m.length)-1)),e.onClick&&e.onClick(t)}},icon:React.createElement(icons.PlusOutlined,null)}),e.title||o.title):null},mt.Copy=React.forwardRef((function(e,n){var r,o=Formily.React.useField(),i=ut(),a=dt(e.index),l=Ke("formily-array-base");return i?"editable"!==(null===(r=i.field)||void 0===r?void 0:r.pattern)?null:React.createElement(icons.CopyOutlined,t({},e,{className:at("".concat(l,"-copy"),(null==o?void 0:o.disabled)?"".concat(l,"-copy-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c,s,u;if(!(null==o?void 0:o.disabled)&&(t.stopPropagation(),!(null===(n=i.props)||void 0===n?void 0:n.disabled))){var d=Formily.Shared.clone(null===(r=null==i?void 0:i.field)||void 0===r?void 0:r.value[a]),f=a+1;null===(c=null===(l=i.field)||void 0===l?void 0:l.insert)||void 0===c||c.call(l,f,d),null===(u=null===(s=i.props)||void 0===s?void 0:s.onCopy)||void 0===u||u.call(s,f),e.onClick&&e.onClick(t)}}})):null})),mt.Remove=React.forwardRef((function(e,n){var r,o=dt(e.index),i=Formily.React.useField(),a=ut(),l=Ke("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(icons.DeleteOutlined,t({},e,{className:at("".concat(l,"-remove"),(null==i?void 0:i.disabled)?"".concat(l,"-remove-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c;(null==i?void 0:i.disabled)||(t.stopPropagation(),null===(r=null===(n=a.field)||void 0===n?void 0:n.remove)||void 0===r||r.call(n,o),null===(c=null===(l=a.props)||void 0===l?void 0:l.onRemove)||void 0===c||c.call(l,o),e.onClick&&e.onClick(t))}})):null})),mt.MoveDown=React.forwardRef((function(e,n){var r,o=dt(e.index),i=Formily.React.useField(),a=ut(),l=Ke("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(icons.DownOutlined,t({},e,{className:at("".concat(l,"-move-down"),(null==i?void 0:i.disabled)?"".concat(l,"-move-down-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c;(null==i?void 0:i.disabled)||(t.stopPropagation(),null===(r=null===(n=a.field)||void 0===n?void 0:n.moveDown)||void 0===r||r.call(n,o),null===(c=null===(l=a.props)||void 0===l?void 0:l.onMoveDown)||void 0===c||c.call(l,o),e.onClick&&e.onClick(t))}})):null})),mt.MoveUp=React.forwardRef((function(e,n){var r,o=dt(e.index),i=Formily.React.useField(),a=ut(),l=Ke("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(icons.UpOutlined,t({},e,{className:at("".concat(l,"-move-up"),(null==i?void 0:i.disabled)?"".concat(l,"-move-up-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l;(null==i?void 0:i.disabled)||(t.stopPropagation(),null===(n=null==a?void 0:a.field)||void 0===n||n.moveUp(o),null===(l=null===(r=null==a?void 0:a.props)||void 0===r?void 0:r.onMoveUp)||void 0===l||l.call(r,o),e.onClick&&e.onClick(t))}})):null})),mt.useArray=ut,mt.useIndex=dt,mt.useRecord=function(e){var t=React.useContext(ct);return st(t?t.record:e)},mt.mixin=function(e){return e.Index=mt.Index,e.SortHandle=mt.SortHandle,e.Addition=mt.Addition,e.Copy=mt.Copy,e.Remove=mt.Remove,e.MoveDown=mt.MoveDown,e.MoveUp=mt.MoveUp,e.useArray=mt.useArray,e.useIndex=mt.useIndex,e.useRecord=mt.useRecord,e};var vt=Ve((function(e){return React.createElement("tr",t({},e))})),ht=ze((function(e){return React.createElement("tbody",t({},e))})),yt=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Column"))>-1},gt=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1},bt={request:null},Rt=Formily.React.observer((function(e){var t,n=Formily.React.useField(),r=Ke("formily-array-table"),o=n.errors,i=null===(t=e.options)||void 0===t?void 0:t.map((function(t){var r=t.label,i=t.value,a=Number(i),l=o.some((function(t){var r=function(e){var t;return Number(null===(t=e.slice(e.indexOf(n.address.toString())+1).match(/(\d+)/))||void 0===t?void 0:t[1])}(t.address),o=(a-1)*e.pageSize,i=a*e.pageSize;return r>=o&&r<=i}));return{label:l?React.createElement(antd.Badge,{dot:!0},r):r,value:i}})),a=15*String(null==i?void 0:i.length).length;return React.createElement(antd.Select,{value:e.value,onChange:e.onChange,options:i,virtual:!0,style:{width:a<60?60:a},className:at("".concat(r,"-status-select"),{"has-error":null==o?void 0:o.length})})}),{scheduler:function(e){clearTimeout(bt.request),bt.request=setTimeout((function(){e()}),100)}}),wt=React.createContext({}),xt=function(e){var n,r=i(React.useState(1),2),o=r[0],a=r[1],l=Ke("formily-array-table"),c=e.pageSize||10,s=e.size||"default",u=e.dataSource||[],d=(o-1)*c,f=d+c-1,m=(null==u?void 0:u.length)||0,p=Math.ceil(m/c),v=Array.from(new Array(p)).map((function(e,t){var n=t+1;return{label:n,value:n}})),h=function(e){a(e)};React.useEffect((function(){p>0&&p<o&&h(p)}),[p,o]);return React.createElement(React.Fragment,null,React.createElement(wt.Provider,{value:{totalPage:p,pageSize:c,changePage:h}},null===(n=e.children)||void 0===n?void 0:n.call(e,null==u?void 0:u.slice(d,f+1),function(){if(!(p<=1))return React.createElement("div",{className:"".concat(l,"-pagination")},React.createElement(antd.Space,null,React.createElement(Rt,{value:o,pageSize:c,onChange:h,options:v,notFoundContent:!1}),React.createElement(antd.Pagination,t({},e,{pageSize:c,current:o,total:u.length,size:s,showSizeChanger:!1,onChange:h}))))}())))},Et=function(e){return React.createElement(vt,t({index:e["data-row-key"]||0},e))},St=Formily.React.observer((function(e){var n=React.useRef(),r=Formily.React.useField(),o=Ke("formily-array-table"),i=Array.isArray(r.value)?r.value.slice():[],a=function(){var e=Formily.React.useField(),t=Formily.React.useFieldSchema(),n=function(t){var r,o,i;if(yt(t)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Operations"))>-1}(t)||gt(t)){if(!(null===(r=t["x-component-props"])||void 0===r?void 0:r.dataIndex)&&!t.name)return[];var a=(null===(o=t["x-component-props"])||void 0===o?void 0:o.dataIndex)||t.name,l=e.query(e.address.concat(a)).take(),c=(null===(i=null==l?void 0:l.component)||void 0===i?void 0:i[1])||t["x-component-props"]||{};return[{name:a,display:(null==l?void 0:l.display)||t["x-display"],field:l,schema:t,columnProps:c}]}if(t.properties)return t.reduceProperties((function(e,t){return e.concat(n(t))}),[])};if(!t)throw new Error("can not found schema object");return function(e){return e?(Formily.Shared.isArr(e)?e:[e]).reduce((function(e,t){var r=n(t);return r?e.concat(r):e}),[]):[]}(t.items)}(),l=function(e,n){return n.reduce((function(n,r,o){var i=r.name,a=r.columnProps,l=r.schema;return"visible"!==r.display?n:yt(l)?n.concat(t(t({},a),{key:o,dataIndex:i,render:function(t,n){var r,o=null===(r=null==e?void 0:e.value)||void 0===r?void 0:r.indexOf(n),i=React.createElement(mt.Item,{index:o,record:function(){var t;return null===(t=null==e?void 0:e.value)||void 0===t?void 0:t[o]}},React.createElement(Formily.React.RecursionField,{schema:l,name:o,onlyRenderProperties:!0}));return i}})):n}),[])}(r,a),c=Formily.Shared.isBool(e.pagination)?{}:e.pagination,s=Formily.React.useFieldSchema().reduceProperties((function(e,t,n){return gt(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null),u=function(e){return i.indexOf(e)},d=React.useCallback((function(e){return React.createElement(ht,t({useDragHandle:!0,lockAxis:"y",helperClass:"".concat(o,"-sort-helper"),helperContainer:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.querySelector("tbody")},onSortStart:function(e){!function(e){var t=document.body.querySelector(".".concat(o,"-sort-helper"));if(t){var n=e.querySelectorAll("td");requestAnimationFrame((function(){t.querySelectorAll("td").forEach((function(e,t){n[t]&&(e.style.width=getComputedStyle(n[t]).width)}))}))}}(e.node)},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;r.move(t,n)}},e))}),[]);return React.createElement(xt,t({},c,{dataSource:i}),(function(r,i){return React.createElement("div",{ref:n,className:o},React.createElement(mt,null,React.createElement(antd.Table,t({size:"small",bordered:!0,rowKey:u},e,{onChange:function(){},pagination:!1,columns:l,dataSource:r,components:{body:{wrapper:d,row:Et}}})),React.createElement("div",{style:{marginTop:5,marginBottom:5}},i),a.map((function(e,t){if(yt(e.schema))return React.createElement(Formily.React.RecursionField,{name:e.name,schema:e.schema,onlyRenderSelf:!0,key:t})})),s))}))}));St.displayName="ArrayTable",St.Column=function(){return React.createElement(React.Fragment,null)},mt.mixin(St);St.Addition=function(e){var n=mt.useArray(),r=React.useContext(wt),o=r.totalPage,i=void 0===o?0:o,a=r.pageSize,l=void 0===a?10:a,c=r.changePage;return React.createElement(mt.Addition,t({},e,{onClick:function(t){var r,o;((null===(r=null==n?void 0:n.field)||void 0===r?void 0:r.value.length)||0)===i*l+1&&Formily.Shared.isFn(c)&&c(i+1),null===(o=e.onClick)||void 0===o||o.call(e,t)}}))};var Ft=Formily.React.observer((function(e){var t=Formily.React.useField(),n="".concat(t.title||"Untitled"," ").concat(e.index+1),r=t.errors.filter((function(n){return n.address.includes("".concat(t.address,".").concat(e.index))}));return r.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:r.length},n):React.createElement(React.Fragment,null,n)})),Ct=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Formily.React.useFieldSchema(),o=i(React.useState("tab-0"),2),a=o[0],l=o[1],c=Array.isArray(n.value)?n.value:[],s=(null==c?void 0:c.length)?c:[{}];return React.createElement(antd.Tabs,t({},e,{activeKey:a,onChange:function(e){l(e)},type:"editable-card",onEdit:function(e,t){var r,o;if("add"==t){var i=s.length;(null===(r=null==n?void 0:n.value)||void 0===r?void 0:r.length)?n.push(null):n.push(null,null),l("tab-".concat(i))}else if("remove"==t){var a=Number(null===(o=e.match(/-(\d+)/))||void 0===o?void 0:o[1]);a-1>-1&&l("tab-".concat(a-1)),n.remove(a)}}}),null==s?void 0:s.map((function(e,t){var n=Array.isArray(r.items)?r.items[t]:r.items,o="tab-".concat(t);return React.createElement(antd.Tabs.TabPane,{key:o,forceRender:!0,closable:0!==t,tab:React.createElement(Ft,{index:t})},React.createElement(Formily.React.RecursionField,{schema:n,name:t}))})))})),Ot=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1},kt=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Index"))>-1},Tt=function(e){return Ot(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Remove"))>-1}(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Copy"))>-1}(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("MoveDown"))>-1}(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("MoveUp"))>-1}(e)},Pt=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Formily.React.useFieldSchema(),o=Array.isArray(n.value)?n.value:[],i=Ke("formily-array-cards",e);if(!r)throw new Error("can not found schema object");return React.createElement(mt,null,function(){if(!(null==o?void 0:o.length))return React.createElement(antd.Card,t({},e,{onChange:function(){},className:at("".concat(i,"-item"),e.className),title:e.title||n.title}),React.createElement(antd.Empty,null))}(),null==o?void 0:o.map((function(o,a){var l=Array.isArray(r.items)?r.items[a]||r.items[0]:r.items,c=React.createElement("span",null,React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!!kt(e)},onlyRenderProperties:!0}),e.title||n.title),s=React.createElement("span",null,React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!!Tt(e)},onlyRenderProperties:!0}),e.extra),u=React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!kt(e)&&!Tt(e)}});return React.createElement(mt.Item,{key:a,index:a,record:function(){var e;return null===(e=n.value)||void 0===e?void 0:e[a]}},React.createElement(antd.Card,t({},e,{onChange:function(){},className:at("".concat(i,"-item"),e.className),title:c,extra:s}),u))})),r.reduceProperties((function(e,t,n){return Ot(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null))}));Pt.displayName="ArrayCards",mt.mixin(Pt);var Nt=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1},At=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Index"))>-1},_t=function(e){return Nt(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Remove"))>-1}(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("MoveDown"))>-1}(e)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("MoveUp"))>-1}(e)},It=function(e){return Array.from({length:e}).map((function(e,t){return t}))},Mt=function(e,t){return It(e<t?e:t)},jt=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Array.isArray(n.value)?n.value:[],o=i(React.useState(Mt(r.length,e.defaultOpenPanelCount)),2),a=o[0],l=o[1],c=Formily.React.useFieldSchema(),s=Ke("formily-array-collapse",e);if(React.useEffect((function(){!n.modified&&r.length&&l(Mt(r.length,e.defaultOpenPanelCount))}),[r.length,n]),!c)throw new Error("can not found schema object");return React.createElement(mt,{onAdd:function(e){l(function(e,t){return e.length<=t?e.concat(t):e.reduce((function(e,n){return n<t?e.concat(n):n===t?e.concat([n,n+1]):e.concat(n+1)}),[])}(a,e))}},function(){if(!r.length)return React.createElement(antd.Card,{className:at("".concat(s,"-item"),e.className)},React.createElement(antd.Empty,null))}(),React.createElement(antd.Collapse,t({},e,{activeKey:a,onChange:function(e){return l(Formily.Shared.toArr(e).map(Number))},className:at("".concat(s,"-item"),e.className)}),r.map((function(e,r){var o=Array.isArray(c.items)?c.items[r]||c.items[0]:c.items,i=n.query("".concat(n.address,".").concat(r)).get("componentProps"),a=o["x-component-props"],l=React.createElement(mt.Item,{index:r,record:e},React.createElement(Formily.React.RecursionField,{schema:o,name:r,filterProperties:function(e){return!!_t(e)},onlyRenderProperties:!0}),null==i?void 0:i.extra),s=React.createElement(Formily.React.RecursionField,{schema:o,name:r,filterProperties:function(e){return!At(e)&&!_t(e)}});return React.createElement(antd.Collapse.Panel,t({},a,i,{forceRender:!0,key:r,header:function(){var e="".concat((null==i?void 0:i.header)||a.header||n.title),t=n.address.concat(r),l=n.form.queryFeedbacks({type:"error",address:"".concat(t,".**")});return React.createElement(mt.Item,{index:r,record:function(){var e;return null===(e=n.value)||void 0===e?void 0:e[r]}},React.createElement(Formily.React.RecursionField,{schema:o,name:r,filterProperties:function(e){return!!At(e)},onlyRenderProperties:!0}),l.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:l.length},e):e)}(),extra:l}),React.createElement(mt.Item,{index:r,key:r,record:e},s))}))),c.reduceProperties((function(e,t,n){return Nt(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null))})),Bt=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)};Bt.displayName="CollapsePanel",jt.defaultProps={defaultOpenPanelCount:5},jt.displayName="ArrayCollapse",jt.CollapsePanel=Bt,mt.mixin(jt);var Dt=Ve((function(e){var n=Ke("formily-array-items");return React.createElement("div",t({},e,{className:at("".concat(n,"-item"),e.className)}),e.children)})),zt=ze((function(e){var n=Ke("formily-array-items");return React.createElement("div",t({},e,{className:at("".concat(n,"-list"),e.className)}),e.children)})),Lt=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Ke("formily-array-items"),o=Formily.React.useFieldSchema(),i=Formily.React.useFieldSchema().reduceProperties((function(e,t,n){return function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1}(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null),a=Array.isArray(n.value)?n.value:[];if(!o)throw new Error("can not found schema object");return React.createElement(mt,null,React.createElement("div",t({},e,{onChange:function(){},className:at(r,e.className)}),React.createElement(zt,{useDragHandle:!0,lockAxis:"y",helperClass:"".concat(r,"-sort-helper"),onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex;n.move(t,r)}},null==a?void 0:a.map((function(e,t){var i=Array.isArray(o.items)?o.items[t]||o.items[0]:o.items;return React.createElement(mt.Item,{key:t,index:t,record:function(){var e;return null===(e=n.value)||void 0===e?void 0:e[t]}},React.createElement(Dt,{key:"item-".concat(t),index:t},React.createElement("div",{className:"".concat(r,"-item-inner")},React.createElement(Formily.React.RecursionField,{schema:i,name:t}))))}))),i))}));Lt.displayName="ArrayItems",Lt.Item=function(e){var n=Ke("formily-array-items");return React.createElement("div",t({},e,{onChange:function(){},className:at("".concat(n,"-").concat(e.type||"card"),e.className)}),e.children)},mt.mixin(Lt);var Wt=function(e){return function(e){return Formily.Shared.isNum(e)||Formily.Shared.isStr(e)||Formily.Shared.isBool(e)||React.isValidElement(e)}(e)?{title:e}:e};function Vt(e,n,i){var a=this;(Formily.Shared.isFn(n)||React.isValidElement(n))&&(i=n,n="form-dialog");var l={host:document.createElement("div"),form:null,promise:null,openMiddlewares:[],confirmMiddlewares:[],cancelMiddlewares:[]},c=rt(l.host,n),s=Wt(e),u=t(t({},s),{afterClose:function(){var e;null===(e=null==s?void 0:s.afterClose)||void 0===e||e.call(s),c.unmount()}}),d=Formily.React.observer((function(){return React.createElement(React.Fragment,null,Formily.Shared.isFn(i)?i(l.form):i)})),f=function(e,n,i){return void 0===e&&(e=!0),React.createElement(Formily.React.Observer,null,(function(){return React.createElement(antd.Modal,t({},u,{visible:e,confirmLoading:l.form.submitting,onCancel:function(e){var t;!1!==(null===(t=null==u?void 0:u.onCancel)||void 0===t?void 0:t.call(u,e))&&i()},onOk:function(e){return r(a,void 0,void 0,(function(){var t;return o(this,(function(r){return!1!==(null===(t=null==u?void 0:u.onOk)||void 0===t?void 0:t.call(u,e))&&n(),[2]}))}))}}),React.createElement(Formily.React.FormProvider,{form:l.form},React.createElement(d,null)))}))};document.body.appendChild(l.host);var m={forOpen:function(e){return Formily.Shared.isFn(e)&&l.openMiddlewares.push(e),m},forConfirm:function(e){return Formily.Shared.isFn(e)&&l.confirmMiddlewares.push(e),m},forCancel:function(e){return Formily.Shared.isFn(e)&&l.cancelMiddlewares.push(e),m},open:function(e){return r(a,void 0,void 0,(function(){var t=this;return o(this,(function(n){return l.promise||(l.promise=new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,a=this;return o(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,ot(u.loadingText,(function(){return Formily.Shared.applyMiddleware(e,l.openMiddlewares)}))];case 1:return e=s.sent(),l.form=l.form||Formily.Core.createForm(e),[3,3];case 2:return t=s.sent(),i(t),[3,3];case 3:return c.render((function(){return f(!0,(function(){l.form.submit((function(){return r(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,Formily.Shared.applyMiddleware(l.form,l.confirmMiddlewares)];case 1:return e.sent(),n(Formily.Reactive.toJS(l.form.values)),m.close(),[2]}}))}))})).catch((function(){}))}),(function(){return r(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,ot(u.loadingText,(function(){return Formily.Shared.applyMiddleware(l.form,l.cancelMiddlewares)}))];case 1:return e.sent(),m.close(),[2]}}))}))}))})),[2]}}))}))}))),[2,l.promise]}))}))},close:function(){l.host&&c.render((function(){return f(!1)}))}};return m}Vt.Footer=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=Ke("modal");return React.useLayoutEffect((function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-content"));n&&(a.current||(a.current=n.querySelector(".".concat(l,"-footer")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-footer")),n.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Vt.Portal=nt("form-dialog");var Xt=function(e){return function(e){return Formily.Shared.isNum(e)||Formily.Shared.isStr(e)||Formily.Shared.isBool(e)||React.isValidElement(e)}(e)?{title:e}:e};function Ht(e,n,i){var a=this;(Formily.Shared.isFn(n)||React.isValidElement(n))&&(i=n,n="form-drawer");var l={host:document.createElement("div"),openMiddlewares:[],form:null,promise:null},c=rt(l.host,n),s=Xt(e),u=t(t({width:"40%"},s),{onClose:function(e){var t;!1!==(null===(t=null==s?void 0:s.onClose)||void 0===t?void 0:t.call(s,e))&&m.close()},afterVisibleChange:function(e){var t;null===(t=null==s?void 0:s.afterVisibleChange)||void 0===t||t.call(s,e),e||c.unmount()}}),d=Formily.React.observer((function(){return React.createElement(React.Fragment,null,Formily.Shared.isFn(i)?i(l.form):i)})),f=function(e){return void 0===e&&(e=!0),React.createElement(antd.Drawer,t({},u,{visible:e}),React.createElement(Formily.React.FormProvider,{form:l.form},React.createElement(d,null)))};document.body.appendChild(l.host);var m={forOpen:function(e){return Formily.Shared.isFn(e)&&l.openMiddlewares.push(e),m},open:function(e){return l.promise||(l.promise=new Promise((function(n,i){return r(a,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,ot(u.loadingText,(function(){return Formily.Shared.applyMiddleware(e,l.openMiddlewares)}))];case 1:return e=o.sent(),l.form=l.form||Formily.Core.createForm(t(t({},e),{effects:function(t){var r;Formily.Core.onFormSubmitSuccess((function(){n(Formily.Reactive.toJS(t.values)),m.close()})),null===(r=null==e?void 0:e.effects)||void 0===r||r.call(e,t)}})),[3,3];case 2:return r=o.sent(),i(r),[3,3];case 3:return c.render((function(){return f(!1)})),setTimeout((function(){c.render((function(){return f(!0)}))}),16),[2]}}))}))}))),l.promise},close:function(){l.host&&c.render((function(){return f(!1)}))}};return m}Ht.Extra=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=Ke("drawer");return React.useLayoutEffect((function(){var e,n,r=null===(n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-wrapper-body")))||void 0===n?void 0:n.querySelector(".".concat(l,"-header"));r&&(a.current||(a.current=r.querySelector(".".concat(l,"-extra")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-extra")),r.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Ht.Footer=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=Ke("drawer");return React.useLayoutEffect((function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-wrapper-body"));n&&(a.current||(a.current=n.querySelector(".".concat(l,"-footer")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-footer")),n.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Ht.Portal=nt("form-drawer");var Gt=function(e,t){return Formily.Shared.isValid(e)?function(e,t){var n;return Array.isArray(e)?-1===t?e[0]:null!==(n=e[t])&&void 0!==n?n:e[e.length-1]:e}(e,t):e},Kt=function(e){var r=React.useRef(null),o=e.breakpoints;if(!Formily.Shared.isArr(o))return{ref:r,props:e};var a=i(React.useState(e),2),l=a[0],c=a[1],s=function(){r.current&&c(function(e,r){var o=e.clientWidth,i=r.breakpoints,a=r.layout,l=r.labelAlign,c=r.wrapperAlign,s=r.labelCol,u=r.wrapperCol,d=n(r,["breakpoints","layout","labelAlign","wrapperAlign","labelCol","wrapperCol"]),f=function(e,t){for(var n=0;n<e.length;n++)if(t<=e[n])return n}(i,o);return t({layout:Gt(a,f),labelAlign:Gt(l,f),wrapperAlign:Gt(c,f),labelCol:Gt(s,f),wrapperCol:Gt(u,f)},d)}(r.current,e))};return React.useEffect((function(){var e=new ResizeObserver((function(){s()}));return r.current&&e.observe(r.current),s(),function(){e.disconnect()}}),[]),{ref:r,props:l}},Yt=React.createContext(null),qt=React.createContext(null),Ut=function(){return React.useContext(Yt)},Jt=function(){return React.useContext(qt)},Qt=function(){return t(t({},Ut()),Jt())},$t=function(e){var r,o,i=e.shallow,a=e.children,l=e.prefixCls,c=e.className,s=e.style,u=n(e,["shallow","children","prefixCls","className","style"]),d=Kt(u),f=d.ref,m=d.props,p=Ut(),v=Ke("form",{prefixCls:l}),h=Ke("formily-layout",{prefixCls:l}),y=at(h,((r={})["".concat(v,"-").concat(m.layout)]=!0,r["".concat(v,"-rtl")]="rtl"===m.direction,r["".concat(v,"-").concat(m.size)]=m.size,r),c);return React.createElement("div",{ref:f,className:y,style:s},(o=t({},p),i?(m.size&&(o.size=m.size),m.colon&&(o.colon=m.colon)):Object.assign(o,m),React.createElement(Yt.Provider,{value:o},React.createElement(qt.Provider,{value:i?m:void 0},a))))};$t.defaultProps={shallow:!0},$t.useFormDeepLayout=Ut,$t.useFormShallowLayout=Jt,$t.useFormLayout=Qt;var Zt=React.createContext("N/A"),en=Zt.Provider,tn=function(e){var t=React.useContext(Zt)||"N/A";return Formily.Shared.isValid(e)&&""!==e?e:t},nn=Formily.React.observer((function(e){var t,n,r,o=Formily.React.useField(),i=Ke("form-text",e),a=(null===(t=null==o?void 0:o.dataSource)||void 0===t?void 0:t.length)?o.dataSource:(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.length)?e.options:[],l=tn(),c=function(t){var n,r,o=(null===(n=e.fieldNames)||void 0===n?void 0:n.label)||"label";return(null===(r=null==a?void 0:a.find((function(n){var r;return n[(null===(r=e.fieldNames)||void 0===r?void 0:r.value)||"value"]==(null==t?void 0:t.value)})))||void 0===r?void 0:r[o])||t.label||l};return React.createElement("div",{className:at(i,e.className),style:e.style},(r=function(){var t=e.value;return"multiple"===e.mode||"tags"===e.mode?e.labelInValue?Formily.Shared.isArr(t)?t:[]:Formily.Shared.isArr(t)?t.map((function(e){return{label:e,value:e}})):[]:e.labelInValue?Formily.Shared.isValid(t)?[t]:[]:Formily.Shared.isValid(t)?[{label:t,value:t}]:[]}()).length?1===r.length?c(r[0]):r.map((function(e,t){return React.createElement(antd.Tag,{key:t},c(e))})):l)})),rn=Formily.React.observer((function(e){var t,n,r,o=Formily.React.useField(),i=tn(),a=Ke("form-text",e),l=(null===(t=null==o?void 0:o.dataSource)||void 0===t?void 0:t.length)?o.dataSource:(null===(n=null==e?void 0:e.treeData)||void 0===n?void 0:n.length)?e.treeData:[],c=function(e,t,n){for(var r,o=0;o<(null==t?void 0:t.length);o++){var i=t[o];if((null==i?void 0:i.value)===e)return null!==(r=null==i?void 0:i.label)&&void 0!==r?r:i[n];var a=c(e,null==i?void 0:i.children,n);if(a)return a}};return React.createElement("div",{className:at(a,e.className),style:e.style},(null==(r=function(){var t=e.value;return e.multiple?e.labelInValue?Formily.Shared.isArr(t)?t:[]:Formily.Shared.isArr(t)?t.map((function(e){return{label:e,value:e}})):[]:e.labelInValue?t?[t]:[]:t?[{label:t,value:t}]:[]}())?void 0:r.length)?r.map((function(t,n){var r=t.value,o=t.label;return React.createElement(antd.Tag,{key:n},c(r,l,e.treeNodeLabelProp)||o||i)})):React.createElement(antd.Tag,null,i))})),on=Formily.React.observer((function(e){var t,n,r,o,i,a,l,c=Formily.React.useField(),s=tn(),u=Ke("form-text",e),d=(null===(t=null==c?void 0:c.dataSource)||void 0===t?void 0:t.length)?c.dataSource:(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.length)?e.options:[];return React.createElement("div",{className:at(u,e.className),style:e.style},(r=Formily.Shared.toArr(e.value),i=e.multiple?r:[r],o=d,a=i.map((function(e){var t=[],n=o;return e.forEach((function(e){var r,o,i=function(e,t){return e.find((function(e){return e.value==t}))}(n,e);t.push({label:null!==(r=null==i?void 0:i.label)&&void 0!==r?r:"",value:null==i?void 0:i.value}),n=null!==(o=null==i?void 0:i.children)&&void 0!==o?o:[]})),t})),l=a.map((function(e){return e.map((function(e){return e.label})).join("/")})).join(" "),l||s))})),an=function(e){var t=Ke("form-text",e);return React.createElement("div",{className:at(t,e.className),style:e.style},tn(e.value))};an.Input=function(e){var t=Ke("form-text",e);return React.createElement(antd.Space,{className:at(t,e.className),style:e.style},e.addonBefore,e.prefix,tn(e.value),e.suffix,e.addonAfter)},an.Select=nn,an.TreeSelect=rn,an.Cascader=on,an.DatePicker=function(e){var t,n=tn(),r=Ke("form-text",e);return React.createElement("div",{className:at(r,e.className)},(t=He(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},an.DateRangePicker=function(e){var t,n=tn(),r=Ke("form-text",e);return React.createElement("div",{className:at(r,e.className),style:e.style},(t=He(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},an.TimePicker=function(e){var t,n=tn(),r=Ke("form-text",e);return React.createElement("div",{className:at(r,e.className),style:e.style},(t=He(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},an.TimeRangePicker=function(e){var t,n=tn(),r=Ke("form-text",e);return React.createElement("div",{className:at(r,e.className),style:e.style},(t=He(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},an.Placeholder=en,an.usePlaceholder=tn,an.NumberPicker=function(e){var t=Ke("form-text",e);return React.createElement(antd.Space,{className:at(t,e.className),style:e.style},e.addonBefore,e.prefix,tn(e.formatter?e.formatter(String(e.value),{userTyping:!1,input:""}):e.value),e.suffix,e.addonAfter)};var ln=an,cn=function(e){var r=e.form,o=e.component,i=e.onAutoSubmit,a=e.onAutoSubmitFailed,l=e.previewTextPlaceholder,c=n(e,["form","component","onAutoSubmit","onAutoSubmitFailed","previewTextPlaceholder"]),s=Formily.React.useParentForm(),u=function(e){return React.createElement(Formily.React.RecordScope,{getRecord:function(){return Formily.Core.isForm(e)?e.values:e.value}},React.createElement(ln.Placeholder,{value:l},React.createElement($t,t({},c),React.createElement(o,{onSubmit:function(t){var n,r;null===(n=null==t?void 0:t.stopPropagation)||void 0===n||n.call(t),null===(r=null==t?void 0:t.preventDefault)||void 0===r||r.call(t),e.submit(i).catch(a)}},c.children))))};if(r)return React.createElement(Formily.React.FormProvider,{form:r},u(r));if(!s)throw new Error("must pass form instance by createForm");return u(s)};cn.defaultProps={component:"form"};var sn={error:React.createElement(icons.CloseCircleOutlined,null),success:React.createElement(icons.CheckCircleOutlined,null),warning:React.createElement(icons.ExclamationCircleOutlined,null)},un=function(e){var r,o,a,l,c,s=e.children,u=n(e,["children"]),d=i(React.useState(!1),2),f=d[0],m=d[1],p=function(e){var n,r,o,i,a,l,c,s,u,d,f,m,p,v,h,y,g,b,R,w,x,E,S,F=Qt(),C=null!==(r=null!==(n=e.layout)&&void 0!==n?n:F.layout)&&void 0!==r?r:"horizontal";return t(t({},e),{layout:C,colon:null!==(o=e.colon)&&void 0!==o?o:F.colon,labelAlign:"vertical"===C?null!==(i=e.labelAlign)&&void 0!==i?i:"left":null!==(l=null!==(a=e.labelAlign)&&void 0!==a?a:F.labelAlign)&&void 0!==l?l:"right",labelWrap:null!==(c=e.labelWrap)&&void 0!==c?c:F.labelWrap,labelWidth:null!==(s=e.labelWidth)&&void 0!==s?s:F.labelWidth,wrapperWidth:null!==(u=e.wrapperWidth)&&void 0!==u?u:F.wrapperWidth,labelCol:null!==(d=e.labelCol)&&void 0!==d?d:F.labelCol,wrapperCol:null!==(f=e.wrapperCol)&&void 0!==f?f:F.wrapperCol,wrapperAlign:null!==(m=e.wrapperAlign)&&void 0!==m?m:F.wrapperAlign,wrapperWrap:null!==(p=e.wrapperWrap)&&void 0!==p?p:F.wrapperWrap,fullness:null!==(v=e.fullness)&&void 0!==v?v:F.fullness,size:null!==(h=e.size)&&void 0!==h?h:F.size,inset:null!==(y=e.inset)&&void 0!==y?y:F.inset,asterisk:e.asterisk,bordered:null!==(g=e.bordered)&&void 0!==g?g:F.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(R=null!==(b=e.feedbackLayout)&&void 0!==b?b:F.feedbackLayout)&&void 0!==R?R:"loose",tooltipLayout:null!==(x=null!==(w=e.tooltipLayout)&&void 0!==w?w:F.tooltipLayout)&&void 0!==x?x:"icon",tooltipIcon:null!==(S=null!==(E=e.tooltipIcon)&&void 0!==E?E:F.tooltipIcon)&&void 0!==S?S:React.createElement(icons.QuestionCircleOutlined,null)})}(u),v=function(){var e=i(React.useState(!1),2),t=e[0],n=e[1],r=React.useRef(),o=React.useRef(),a=Qt(),l=JSON.stringify(a.labelCol);return React.useEffect((function(){requestAnimationFrame((function(){if(r.current&&o.current){var e=o.current.getBoundingClientRect().width,i=r.current.getBoundingClientRect().width;e&&i&&i<e?t||n(!0):t&&n(!1)}}))}),[l]),{overflow:t,containerRef:r,contentRef:o}}(),h=v.containerRef,y=v.contentRef,g=v.overflow,b=p.label,R=p.style,w=p.layout,x=p.colon,E=void 0===x||x,S=p.addonBefore,F=p.addonAfter,C=p.asterisk,O=p.feedbackStatus,k=p.extra,T=p.feedbackText,P=p.fullness,N=p.feedbackLayout,A=p.feedbackIcon,_=p.getPopupContainer,I=p.inset,M=p.bordered,j=void 0===M||M,B=p.labelWidth,D=p.wrapperWidth,z=p.labelCol,L=p.wrapperCol,W=p.labelAlign,V=p.wrapperAlign,X=void 0===V?"left":V,H=p.size,G=p.labelWrap,K=p.wrapperWrap,Y=p.tooltipLayout,q=p.tooltip,U=p.tooltipIcon,J=t({},p.labelStyle),Q=t({},p.wrapperStyle),$=!1;(B||D)&&(B&&(J.width="auto"===B?void 0:B,J.maxWidth="auto"===B?void 0:B),D&&(Q.width="auto"===D?void 0:D,Q.maxWidth="auto"===D?void 0:D)),(z||L)&&(J.width||Q.width||"vertical"===w||($=!0));var Z=Ke("formily-item",u),ee="popover"===N?React.createElement(antd.Popover,{autoAdjustOverflow:!0,placement:"top",content:React.createElement("div",{className:at((r={},r["".concat(Z,"-").concat(O,"-help")]=!!O,r["".concat(Z,"-help")]=!0,r))},sn[O]," ",T),visible:!!T,getPopupContainer:_},s):s;return React.createElement("div",t({},it(u),{style:t(t({},R),{}),"data-grid-span":u.gridSpan,className:at((o={},o["".concat(Z)]=!0,o["".concat(Z,"-layout-").concat(w)]=!0,o["".concat(Z,"-").concat(O)]=!!O,o["".concat(Z,"-feedback-has-text")]=!!T,o["".concat(Z,"-size-").concat(H)]=!!H,o["".concat(Z,"-feedback-layout-").concat(N)]=!!N,o["".concat(Z,"-fullness")]=!!P||!!I||!!A,o["".concat(Z,"-inset")]=!!I,o["".concat(Z,"-active")]=f,o["".concat(Z,"-inset-active")]=!!I&&f,o["".concat(Z,"-label-align-").concat(W)]=!0,o["".concat(Z,"-control-align-").concat(X)]=!0,o["".concat(Z,"-label-wrap")]=!!G,o["".concat(Z,"-control-wrap")]=!!K,o["".concat(Z,"-bordered-none")]=!1===j||!!I||!!A,o[u.className]=!!u.className,o)),onFocus:function(){(A||I)&&m(!0)},onBlur:function(){(A||I)&&m(!1)}}),function(){var e,t;return b?React.createElement("div",{className:at((e={},e["".concat(Z,"-label")]=!0,e["".concat(Z,"-label-tooltip")]=q&&"text"===Y||g,e["".concat(Z,"-item-col-").concat(z)]=$&&!!z,e)),style:J},(t=React.createElement("div",{className:"".concat(Z,"-label-content"),ref:h},React.createElement("span",{ref:y},C&&React.createElement("span",{className:"".concat(Z,"-asterisk")},"*"),React.createElement("label",null,b))),"text"===Y&&q||g?React.createElement(antd.Tooltip,{placement:"top",align:{offset:[0,10]},title:g?React.createElement("div",null,React.createElement("div",null,b),React.createElement("div",null,q)):q},t):t),function(){if(q&&"icon"===Y&&!g)return React.createElement("span",{className:"".concat(Z,"-label-tooltip-icon")},React.createElement(antd.Tooltip,{placement:"top",align:{offset:[0,2]},title:q},U))}()," "!==b&&React.createElement("span",{className:"".concat(Z,"-colon")},E?":":"")):null}(),React.createElement("div",{className:at((a={},a["".concat(Z,"-control")]=!0,a["".concat(Z,"-item-col-").concat(L)]=$&&!!L&&b,a))},React.createElement("div",{className:at("".concat(Z,"-control-content"))},S&&React.createElement("div",{className:at("".concat(Z,"-addon-before"))},S),React.createElement("div",{style:Q,className:at((l={},l["".concat(Z,"-control-content-component")]=!0,l["".concat(Z,"-control-content-component-has-feedback-icon")]=!!A,l))},React.createElement(qt.Provider,{value:void 0},ee),A&&React.createElement("div",{className:at("".concat(Z,"-feedback-icon"))},A)),F&&React.createElement("div",{className:at("".concat(Z,"-addon-after"))},F)),!!T&&"popover"!==N&&"none"!==N&&React.createElement("div",{className:at((c={},c["".concat(Z,"-").concat(O,"-help")]=!!O,c["".concat(Z,"-help")]=!0,c["".concat(Z,"-help-enter")]=!0,c["".concat(Z,"-help-enter-active")]=!0,c))},T),k&&React.createElement("div",{className:at("".concat(Z,"-extra"))},k)))},dn=Formily.React.connect(un,Formily.React.mapProps((function(e,t){if(Formily.Core.isVoidField(t))return{label:t.title||e.label,asterisk:e.asterisk,extra:e.extra||t.description};if(!t)return e;return{label:e.label||t.title,feedbackStatus:t.validating?"pending":t.decoratorProps.feedbackStatus||t.validateStatus,feedbackText:function(){var n=function(e){return e.reduce((function(t,n,r){return n?r<e.length-1?t.concat([n,", "]):t.concat([n]):t}),[])};if(!t.validating)return e.feedbackText?e.feedbackText:t.selfErrors.length?n(t.selfErrors):t.selfWarnings.length?n(t.selfWarnings):t.selfSuccesses.length?n(t.selfSuccesses):void 0}(),asterisk:!(!t.required||"readPretty"===t.pattern)||"asterisk"in e&&e.asterisk,extra:e.extra||t.description}})));dn.BaseItem=un;var fn=Formily.React.connect(Formily.React.observer((function(e){var r,o=e.formStep,i=e.className,a=n(e,["formStep","className"]),l=Formily.React.useField(),c=Ke("formily-step",a),s=function(e){var t=[];return e.mapProperties((function(e,n){var r;(null===(r=e["x-component"])||void 0===r?void 0:r.indexOf("StepPane"))>-1&&t.push({name:n,props:e["x-component-props"],schema:e})})),t}(Formily.React.useFieldSchema()),u=a.current||(null==o?void 0:o.current)||0;return null===(r=null==o?void 0:o.connect)||void 0===r||r.call(o,s,l),React.createElement("div",{className:at(c,i)},React.createElement(antd.Steps,t({},a,{style:t({marginBottom:10},a.style),current:u}),s.map((function(e,n){var r=e.props;return React.createElement(antd.Steps.Step,t({},r,{key:n}))}))),s.map((function(e,t){var n=e.name,r=e.schema;if(t===u)return React.createElement(Formily.React.RecursionField,{key:t,name:n,schema:r})})))})));fn.StepPane=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},fn.createFormStep=function(e){void 0===e&&(e=0);var t=Formily.Reactive.define({form:null,field:null,steps:[]},{form:Formily.Reactive.observable.ref,field:Formily.Reactive.observable.ref,steps:Formily.Reactive.observable.shallow}),n=Formily.Reactive.action.bound((function(e){var n=t.steps[e];t.steps.forEach((function(e){var r=e.name;t.form.query("".concat(t.field.address,".").concat(r)).take((function(e){r===n.name?e.setDisplay("visible"):e.setDisplay("hidden")}))}))})),i=Formily.Reactive.action.bound((function(){l.allowNext&&l.setCurrent(l.current+1)})),a=Formily.Reactive.action.bound((function(){l.allowBack&&l.setCurrent(l.current-1)})),l=Formily.Reactive.model({connect:function(e,n){t.steps=e,t.form=null==n?void 0:n.form,t.field=n},current:e,setCurrent:function(e){n(e),l.current=e},get allowNext(){return l.current<t.steps.length-1},get allowBack(){return l.current>0},next:function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.form.validate()];case 1:return e.sent(),t.form.valid&&i(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},back:function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return a(),[2]}))}))},submit:function(e){var n,i;return r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,null===(i=null===(n=t.form)||void 0===n?void 0:n.submit)||void 0===i?void 0:i.call(n,e)]}))}))}});return Formily.Reactive.markRaw(l)};var mn,pn=function(){return pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pn.apply(this,arguments)},vn=function(e){return 1===e.nodeType},hn=function(){function e(e){var t=this;this.childList=[],this.handler=function(e){e.forEach((function(e){"childList"===e.type&&(e.addedNodes.forEach((function(e){vn(e)&&t.addObserver(e)})),e.removedNodes.forEach((function(e){vn(e)&&t.removeObserver(e)})))})),t.callback(e,t.observer)},this.observe=function(e,n){t.init=n,t.observeChildList(e),t.observer.observe(e,pn(pn({},t.init),{subtree:!1,childList:!0,characterData:!1,characterDataOldValue:!1,attributeOldValue:!1}))},this.disconnect=function(){t.observer.disconnect()},this.callback=e,this.observer=new MutationObserver(this.handler)}return e.prototype.observeChildList=function(e){var t=this;Array.from(e.children).forEach((function(e){t.addObserver(e)}))},e.prototype.addObserver=function(e){var t=this;if(!this.childList.find((function(t){return t.element===e}))){var n=this.childList.length,r={element:e,observer:new MutationObserver(this.callback),dispose:function(){r.observer&&(r.observer.disconnect(),delete r.observer,t.childList.splice(n,1))}};r.observer.observe(r.element,pn(pn({},this.init),{subtree:!1,childList:!1,characterData:!1,characterDataOldValue:!1,attributeOldValue:!1})),this.childList.push(r)}},e.prototype.removeObserver=function(e){var t,n=this.childList.find((function(t){return t.element===e}));n&&(null===(t=n.dispose)||void 0===t||t.call(n))},e}(),yn=[],gn="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(mn||(mn={}));var bn,Rn=function(e){return Object.freeze(e)},wn=function(e,t){this.inlineSize=e,this.blockSize=t,Rn(this)},xn=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Rn(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),En=function(e){return e instanceof SVGElement&&"getBBox"in e},Sn=function(e){if(En(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},Fn=function(e){var t,n;if(e instanceof Element)return!0;var r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},Cn="undefined"!=typeof window?window:{},On=new WeakMap,kn=/auto|scroll/,Tn=/^tb|vertical/,Pn=/msie|trident/i.test(Cn.navigator&&Cn.navigator.userAgent),Nn=function(e){return parseFloat(e||"0")},An=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new wn((n?t:e)||0,(n?e:t)||0)},_n=Rn({devicePixelContentBoxSize:An(),borderBoxSize:An(),contentBoxSize:An(),contentRect:new xn(0,0,0,0)}),In=function(e,t){if(void 0===t&&(t=!1),On.has(e)&&!t)return On.get(e);if(Sn(e))return On.set(e,_n),_n;var n=getComputedStyle(e),r=En(e)&&e.ownerSVGElement&&e.getBBox(),o=!Pn&&"border-box"===n.boxSizing,i=Tn.test(n.writingMode||""),a=!r&&kn.test(n.overflowY||""),l=!r&&kn.test(n.overflowX||""),c=r?0:Nn(n.paddingTop),s=r?0:Nn(n.paddingRight),u=r?0:Nn(n.paddingBottom),d=r?0:Nn(n.paddingLeft),f=r?0:Nn(n.borderTopWidth),m=r?0:Nn(n.borderRightWidth),p=r?0:Nn(n.borderBottomWidth),v=d+s,h=c+u,y=(r?0:Nn(n.borderLeftWidth))+m,g=f+p,b=l?e.offsetHeight-g-e.clientHeight:0,R=a?e.offsetWidth-y-e.clientWidth:0,w=o?v+y:0,x=o?h+g:0,E=r?r.width:Nn(n.width)-w-R,S=r?r.height:Nn(n.height)-x-b,F=E+v+R+y,C=S+h+b+g,O=Rn({devicePixelContentBoxSize:An(Math.round(E*devicePixelRatio),Math.round(S*devicePixelRatio),i),borderBoxSize:An(F,C,i),contentBoxSize:An(E,S,i),contentRect:new xn(d,c,E,S)});return On.set(e,O),O},Mn=function(e,t,n){var r=In(e,n),o=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case mn.DEVICE_PIXEL_CONTENT_BOX:return a;case mn.BORDER_BOX:return o;default:return i}},jn=function(e){var t=In(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Rn([t.borderBoxSize]),this.contentBoxSize=Rn([t.contentBoxSize]),this.devicePixelContentBoxSize=Rn([t.devicePixelContentBoxSize])},Bn=function(e){if(Sn(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Dn=function(){var e=1/0,t=[];yn.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new jn(t.target),o=Bn(t.target);r.push(n),t.lastReportedSize=Mn(t.target,t.observedBox),o<e&&(e=o)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},zn=function(e){yn.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(Bn(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Ln=function(){var e,t=0;for(zn(t);yn.some((function(e){return e.activeTargets.length>0}));)t=Dn(),zn(t);return yn.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:gn}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=gn),window.dispatchEvent(e)),t>0},Wn=[],Vn=function(e){if(!bn){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Wn.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),bn=function(){n.textContent=""+(t?t--:t++)}}Wn.push(e),bn()},Xn=0,Hn={attributes:!0,characterData:!0,childList:!0,subtree:!0},Gn=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Kn=function(e){return void 0===e&&(e=0),Date.now()+e},Yn=!1,qn=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Yn){Yn=!0;var n,r=Kn(e);n=function(){var n=!1;try{n=Ln()}finally{if(Yn=!1,e=r-Kn(),!Xn)return;n?t.run(1e3):e>0?t.run(e):t.start()}},Vn((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Hn)};document.body?t():Cn.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Gn.forEach((function(t){return Cn.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Gn.forEach((function(t){return Cn.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Un=function(e){!Xn&&e>0&&qn.start(),!(Xn+=e)&&qn.stop()},Jn=function(){function e(e,t){this.target=e,this.observedBox=t||mn.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Mn(this.target,this.observedBox,!0);return e=this.target,En(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Qn=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},$n=new WeakMap,Zn=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},er=function(){function e(){}return e.connect=function(e,t){var n=new Qn(e,t);$n.set(e,n)},e.observe=function(e,t,n){var r=$n.get(e),o=0===r.observationTargets.length;Zn(r.observationTargets,t)<0&&(o&&yn.push(r),r.observationTargets.push(new Jn(t,n&&n.box)),Un(1),qn.schedule())},e.unobserve=function(e,t){var n=$n.get(e),r=Zn(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&yn.splice(yn.indexOf(n),1),n.observationTargets.splice(r,1),Un(-1))},e.disconnect=function(e){var t=this,n=$n.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),tr=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");er.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fn(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");er.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fn(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");er.unobserve(this,e)},e.prototype.disconnect=function(){er.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),nr=function(){return nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nr.apply(this,arguments)},rr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},or=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ir=/span\s*(\d+)/,ar=function(e,t){return void 0===t&&(t=!1),e.reduce((function(e,n){var r;return t||n.visible?-1===n.originSpan?e+(null!==(r=n.span)&&void 0!==r?r:1):e+n.span:e}),0)},lr=function(e,t){return void 0===t&&(t=!1),e.reduce((function(e,n){var r;return t||n.visible?-1===n.originSpan?e+(null!==(r=n.span)&&void 0!==r?r:1):e+n.originSpan:e}),0)},cr=function(e){var t,n;return Number(null!==(n=null===(t=String(e).match(ir))||void 0===t?void 0:t[1])&&void 0!==n?n:1)},sr=function(e,t){return function(e){return null!=e}(e)?function(e,t){var n;return Array.isArray(e)?-1===t?e[0]:null!==(n=e[t])&&void 0!==n?n:e[e.length-1]:e}(e,t.breakpoint):e},ur=function(e){return Promise.resolve(0).then(e)},dr=function(){function e(e){var t=this;this.width=0,this.height=0,this.children=[],this.childTotalColumns=0,this.shadowChildTotalColumns=0,this.childOriginTotalColumns=0,this.shadowChildOriginTotalColumns=0,this.ready=!1,this.connect=function(e){if(e){t.container=e;var n=Formily.Reactive.batch.bound((function(){r(),t.ready=!0})),r=Formily.Reactive.batch.bound((function(){var e;t.children=(e=t.container.children,Array.from(e).reduce((function(e,t,n){var r,o=getComputedStyle(t),i=!("none"===o.display),a=t.getAttribute("data-grid-span"),l=null!==(r=cr(o.gridColumnStart))&&void 0!==r?r:1,c={index:n,span:l,visible:i,originSpan:Number(null!=a?a:l),element:t};return a||t.setAttribute("data-grid-span",String(l)),e.concat(c)}),[])),t.childTotalColumns=ar(t.children),t.shadowChildTotalColumns=ar(t.children,!0),t.childOriginTotalColumns=lr(t.children),t.shadowChildOriginTotalColumns=lr(t.children,!0);var n,r,o,i,a,l=t.container.getBoundingClientRect();l.width&&l.height&&(t.width=l.width,t.height=l.height),r=0,o=0,i=0,a=0,(n=t).ready&&(n.children=n.children.map((function(e){var t,l=r%n.columns,c=o%n.columns,s=n.columns-l,u=e.originSpan,d=u>n.columns?n.columns:u,f=n.options.strictAutoFit?d:d>s?s:d,m=-1===u?"span ".concat(s," / -1"):"span ".concat(f," / auto");return e.element.style.gridColumn!==m&&(e.element.style.gridColumn=m),e.visible&&(r+=f),o+=f,0===l&&i++,0==c&&a++,e.shadowRow=a,e.shadowColumn=c+1,e.visible&&(e.row=i,e.column=l+1),(null===(t=n.options)||void 0===t?void 0:t.shouldVisible)&&(n.options.shouldVisible(e,n)?(e.visible||(e.element.style.display=""),e.visible=!0):(e.visible&&(e.element.style.display="none"),e.visible=!1)),e}))),ur((function(){var e,n;null===(n=null===(e=t.options)||void 0===e?void 0:e.onDigest)||void 0===n||n.call(e,t)})),t.ready||ur((function(){var e,n;null===(n=null===(e=t.options)||void 0===e?void 0:e.onInitialized)||void 0===n||n.call(e,t)}))})),o=new hn(r),i=new tr(r),a=Formily.Reactive.reaction((function(){return nr({},t.options)}),r);return i.observe(t.container),o.observe(t.container,{attributeFilter:["data-grid-span"],attributes:!0}),n(),function(){i.unobserve(t.container),i.disconnect(),o.disconnect(),a(),t.children=[]}}return function(){}},this.options=nr({breakpoints:[720,1280,1920],columnGap:8,rowGap:4,minWidth:100,colWrap:!0,strictAutoFit:!1},e),Formily.Reactive.define(this,{options:Formily.Reactive.observable.shallow,width:Formily.Reactive.observable.ref,height:Formily.Reactive.observable.ref,ready:Formily.Reactive.observable.ref,children:Formily.Reactive.observable.ref,childOriginTotalColumns:Formily.Reactive.observable.ref,shadowChildOriginTotalColumns:Formily.Reactive.observable.ref,shadowChildTotalColumns:Formily.Reactive.observable.ref,childTotalColumns:Formily.Reactive.observable.ref,columns:Formily.Reactive.observable.computed,templateColumns:Formily.Reactive.observable.computed,gap:Formily.Reactive.observable.computed,maxColumns:Formily.Reactive.observable.computed,minColumns:Formily.Reactive.observable.computed,maxWidth:Formily.Reactive.observable.computed,minWidth:Formily.Reactive.observable.computed,breakpoints:Formily.Reactive.observable.computed,breakpoint:Formily.Reactive.observable.computed,rowGap:Formily.Reactive.observable.computed,columnGap:Formily.Reactive.observable.computed,colWrap:Formily.Reactive.observable.computed})}return Object.defineProperty(e.prototype,"breakpoints",{get:function(){return this.options.breakpoints},set:function(e){this.options.breakpoints=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakpoint",{get:function(){return function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t<=e[n])return n;return-1}(this.options.breakpoints,this.width)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var e;return null!==(e=sr(this.options.maxWidth,this))&&void 0!==e?e:1/0},set:function(e){this.options.maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){var e;return null!==(e=sr(this.options.minWidth,this))&&void 0!==e?e:100},set:function(e){this.options.minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){var e;return null!==(e=sr(this.options.maxColumns,this))&&void 0!==e?e:1/0},set:function(e){this.options.maxColumns=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRows",{get:function(){var e;return null!==(e=this.options.maxRows)&&void 0!==e?e:1/0},set:function(e){this.options.maxRows=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minColumns",{get:function(){var e;return null!==(e=sr(this.options.minColumns,this))&&void 0!==e?e:1},set:function(e){this.options.minColumns=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGap",{get:function(){var e;return null!==(e=sr(this.options.rowGap,this))&&void 0!==e?e:5},set:function(e){this.options.rowGap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnGap",{get:function(){var e;return null!==(e=sr(this.options.columnGap,this))&&void 0!==e?e:10},set:function(e){this.options.columnGap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colWrap",{get:function(){var e;return null===(e=sr(this.options.colWrap,this))||void 0===e||e},set:function(e){this.options.colWrap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){if(!this.ready)return 0;var e=this.childOriginTotalColumns;if(!1===this.colWrap)return e;var t=this.childSize,n=Math.round(this.width/(this.maxWidth+this.columnGap)),r=Math.min(e,n),o=this.options.strictAutoFit?n:r,i=Math.round(this.width/(this.minWidth+this.columnGap)),a=Math.min(e,i),l=this.options.strictAutoFit?i:a,c=Math.min(t,e,o,l),s=Math.max(t,e,o,l),u=function(e,t,n,r,o,i){for(var a=[],l=n;l<=t;l++){var c=e-(l-1)*i,s=c/l;s>=o&&s<=r?a.push(l):s<o?a.push(Math.min(Math.floor(c/o),t)):s>r&&a.push(Math.min(Math.floor(c/r),t))}return Math.max.apply(Math,or([],rr(a),!1))}(this.width,s,c,this.maxWidth,this.minWidth,this.columnGap);return u>=this.maxColumns?this.maxColumns:u<=this.minColumns?this.minColumns:u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return Math.ceil(this.childTotalColumns/this.columns)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowRows",{get:function(){return Math.ceil(this.shadowChildTotalColumns/this.columns)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateColumns",{get:function(){if(!this.width)return"";if(this.maxWidth===1/0)return"repeat(".concat(this.columns,",minmax(0,1fr))");if(!0!==this.options.strictAutoFit){var e=(this.width-(this.columns-1)*this.columnGap)/this.columns;if(e<this.minWidth||e>this.maxWidth)return"repeat(".concat(this.columns,",minmax(0,1fr))")}return"repeat(".concat(this.columns,",minmax(").concat(this.minWidth,"px,").concat(this.maxWidth,"px))")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return"".concat(this.rowGap,"px ").concat(this.columnGap,"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childSize",{get:function(){return this.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullnessLastColumn",{get:function(){var e;return this.columns===(null===(e=this.children[this.childSize-1])||void 0===e?void 0:e.span)},enumerable:!1,configurable:!0}),e.id=function(e){return void 0===e&&(e={}),JSON.stringify(["maxRows","maxColumns","minColumns","maxWidth","minWidth","breakpoints","columnGap","rowGap","colWrap","strictAutoFit"].map((function(t){return e[t]})))},e}(),fr=React.createContext(null),mr=function(e){return Formily.Reactive.markRaw(new dr(e))},pr=function(){return React.useContext(fr)},vr=function(e){return void 0===e&&(e=1),e},hr=function(e){return void 0===e&&(e=1),e},yr=Formily.React.observer((function(e){var r,o,i=e.children,a=e.className,l=e.style,c=n(e,["children","className","style"]),s=Qt(),u=t({columnGap:null!==(r=null==s?void 0:s.gridColumnGap)&&void 0!==r?r:8,rowGap:null!==(o=null==s?void 0:s.gridRowGap)&&void 0!==o?o:4},c),d=React.useMemo((function(){return Formily.Reactive.markRaw((null==u?void 0:u.grid)?u.grid:new dr(u))}),[dr.id(u)]),f=React.useRef(),m=Ke("formily-grid",c),p=it(c);return React.useLayoutEffect((function(){return d.connect(f.current)}),[d]),React.createElement(fr.Provider,{value:d},React.createElement("div",t({},p,{className:at("".concat(m,"-layout"),a),style:t(t({},l),{gridTemplateColumns:d.templateColumns,gap:d.gap}),ref:f}),i))}),{forwardRef:!0}),gr=Formily.React.observer((function(e){var r=e.gridSpan,o=e.children,i=n(e,["gridSpan","children"]);return React.createElement("div",t({},i,{style:i.style,"data-grid-span":r}),o)}));gr.defaultProps={gridSpan:1},yr.createFormGrid=mr,yr.useGridSpan=vr,yr.useGridColumn=hr,yr.useFormGrid=pr,yr.GridColumn=gr;var br=Formily.React.observer((function(e){var t=Formily.React.useField(),n=t.form.queryFeedbacks({type:"error",address:"".concat(t.address.concat(e.name),".*")});return n.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:n.length},e.tab):React.createElement(React.Fragment,null,e.tab)})),Rr=function(e){var t=Formily.Reactive.model({activeKey:e,setActiveKey:function(e){t.activeKey=e}});return Formily.Reactive.markRaw(t)},wr=Formily.React.observer((function(e){var r=e.formTab,o=n(e,["formTab"]),i=function(){var e=Formily.React.useField(),n=Formily.React.useFieldSchema(),r=[];return n.mapProperties((function(n,o){var i,a,l=e.query(e.address.concat(o)).take();"none"!==(null==l?void 0:l.display)&&"hidden"!==(null==l?void 0:l.display)&&(null===(i=n["x-component"])||void 0===i?void 0:i.indexOf("TabPane"))>-1&&r.push({name:o,props:t({key:(null===(a=null==n?void 0:n["x-component-props"])||void 0===a?void 0:a.key)||o},null==n?void 0:n["x-component-props"]),schema:n})})),r}(),a=React.useMemo((function(){return r||Rr()}),[]),l=Ke("formily-tab",o),c=o.activeKey||(null==a?void 0:a.activeKey);return React.createElement(antd.Tabs,t({},o,{className:at(l,o.className),activeKey:c,onChange:function(e){var t,n;null===(t=o.onChange)||void 0===t||t.call(o,e),null===(n=null==r?void 0:r.setActiveKey)||void 0===n||n.call(r,e)}}),i.map((function(e,n){var r=e.props,o=e.schema,i=e.name;return React.createElement(antd.Tabs.TabPane,t({key:n},r,{tab:React.createElement(br,{name:i,tab:r.tab}),forceRender:!0}),React.createElement(Formily.React.RecursionField,{schema:o,name:i}))})))}));wr.TabPane=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},wr.createFormTab=Rr;var xr=function(e){var t=Formily.Reactive.model({activeKeys:e,setActiveKeys:function(e){t.activeKeys=e},hasActiveKey:function(e){if(Array.isArray(t.activeKeys)){if(t.activeKeys.includes(e))return!0}else if(t.activeKeys==e)return!0;return!1},addActiveKey:function(e){t.hasActiveKey(e)||(t.activeKeys=Formily.Shared.toArr(t.activeKeys).concat(e))},removeActiveKey:function(e){Array.isArray(t.activeKeys)?t.activeKeys=t.activeKeys.filter((function(t){return t!=e})):t.activeKeys=""},toggleActiveKey:function(e){t.hasActiveKey(e)?t.removeActiveKey(e):t.addActiveKey(e)}});return Formily.Reactive.markRaw(t)},Er=Formily.React.observer((function(e){var r=e.formCollapse,o=n(e,["formCollapse"]),i=Formily.React.useField(),a=function(){var e=Formily.React.useField(),n=Formily.React.useFieldSchema(),r=[];return n.mapProperties((function(n,o){var i,a,l=e.query(e.address.concat(o)).take();"none"!==(null==l?void 0:l.display)&&"hidden"!==(null==l?void 0:l.display)&&(null===(i=n["x-component"])||void 0===i?void 0:i.indexOf("CollapsePanel"))>-1&&r.push({name:o,props:t(t({},null==n?void 0:n["x-component-props"]),{key:(null===(a=null==n?void 0:n["x-component-props"])||void 0===a?void 0:a.key)||o}),schema:n})})),r}(),l=Ke("formily-collapse",o),c=React.useMemo((function(){return r||xr(o.defaultActiveKey)}),[]),s=function(e,t){var n=i.form.queryFeedbacks({type:"error",address:"".concat(i.address.concat(e),".*")});return n.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:n.length},t.header):t.header};return React.createElement(antd.Collapse,t({},o,{className:at(l,o.className),activeKey:function(){var e;return o.activeKey?o.activeKey:(null==c?void 0:c.activeKeys)?null==c?void 0:c.activeKeys:o.accordion?null===(e=a[0])||void 0===e?void 0:e.name:a.map((function(e){return e.name}))}(),onChange:function(e){var t,n;null===(t=null==o?void 0:o.onChange)||void 0===t||t.call(o,e),null===(n=null==c?void 0:c.setActiveKeys)||void 0===n||n.call(c,e)}}),a.map((function(e,n){var r=e.props,o=e.schema,i=e.name;return React.createElement(antd.Collapse.Panel,t({key:n},r,{header:s(i,r),forceRender:!0}),React.createElement(Formily.React.RecursionField,{schema:o,name:i}))})))}));Er.CollapsePanel=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},Er.createFormCollapse=xr;var Sr=E((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Fr=x(E((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sr(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),Cr=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),Or="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,kr="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Tr="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(kr):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Pr=["top","right","bottom","left","width","height","size","weight"],Nr="undefined"!=typeof MutationObserver,Ar=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&l()}function a(){Tr(i)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Or&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Or&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Pr.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),_r=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},Ir=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||kr},Mr=Wr(0,0,0,0);function jr(e){return parseFloat(e)||0}function Br(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+jr(e["border-"+n+"-width"])}),0)}function Dr(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Mr;var r=Ir(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=jr(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,l=jr(r.width),c=jr(r.height);if("border-box"===r.boxSizing&&(Math.round(l+i)!==t&&(l-=Br(r,"left","right")+i),Math.round(c+a)!==n&&(c-=Br(r,"top","bottom")+a)),!function(e){return e===Ir(e).document.documentElement}(e)){var s=Math.round(l+i)-t,u=Math.round(c+a)-n;1!==Math.abs(s)&&(l-=s),1!==Math.abs(u)&&(c-=u)}return Wr(o.left,o.top,l,c)}var zr="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Ir(e).SVGGraphicsElement}:function(e){return e instanceof Ir(e).SVGElement&&"function"==typeof e.getBBox};function Lr(e){return Or?zr(e)?function(e){var t=e.getBBox();return Wr(0,0,t.width,t.height)}(e):Dr(e):Mr}function Wr(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Vr=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Wr(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Lr(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Xr=function(e,t){var n,r,o,i,a,l,c,s=(r=(n=t).x,o=n.y,i=n.width,a=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(l.prototype),_r(c,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),c);_r(this,{target:e,contentRect:s})},Hr=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Cr,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ir(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Vr(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ir(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Xr(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Gr="undefined"!=typeof WeakMap?new WeakMap:new Cr,Kr=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Ar.getInstance(),r=new Hr(t,n,this);Gr.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Kr.prototype[e]=function(){var t;return(t=Gr.get(this))[e].apply(t,arguments)}}));var Yr=void 0!==kr.ResizeObserver?kr.ResizeObserver:Kr,qr=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?qr="sticky":CSS.supports("position","-webkit-sticky")&&(qr="-webkit-sticky"));var Ur=!1;try{var Jr=Object.defineProperty({},"passive",{get:function(){Ur={passive:!0}}});window.addEventListener("testPassive",null,Jr),window.removeEventListener("testPassive",null,Jr)}catch(e){}var Qr=function(e){function t(t){var n=e.call(this,t)||this;return n.addListener=function(e,t,r,o){e.addEventListener(t,r,o),n.unsubscribes.push((function(){return e.removeEventListener(t,r)}))},n.addResizeObserver=function(e,t){var r=new Yr(t);r.observe(e),n.unsubscribes.push((function(){return r.disconnect()}))},n.registerContainerRef=function(e){qr&&(n.node=e,e?(n.scrollPane=function(e){for(var t=e;t=t.parentElement;){var n=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)return window;if("auto"===n||"scroll"===n)return t}return window}(n.node),n.latestScrollY=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop,n.addListener(n.scrollPane,"scroll",n.handleScroll,Ur),n.addListener(n.scrollPane,"mousewheel",n.handleScroll,Ur),n.scrollPane===window?(n.addListener(window,"resize",n.handleWindowResize),n.handleWindowResize()):(n.addResizeObserver(n.scrollPane,n.handleScrollPaneResize),n.handleScrollPaneResize()),n.addResizeObserver(n.node.parentNode,n.handleParentNodeResize),n.handleParentNodeResize(),n.addResizeObserver(n.node,n.handleNodeResize),n.handleNodeResize({initial:!0}),n.initial()):(n.unsubscribes.forEach((function(e){return e()})),n.unsubscribes=[],n.scrollPane=null))},n.getCurrentOffset=function(){if("relative"===n.mode)return n.offset;var e=n.props,t=e.offsetTop,r=e.offsetBottom;return"stickyTop"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY-n.naturalTop+t):"stickyBottom"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY+n.viewPortHeight-(n.naturalTop+n.nodeHeight+r)):void 0},n.handleWindowResize=function(){n.viewPortHeight=window.innerHeight,n.scrollPaneOffset=0,n.handleScroll()},n.handleScrollPaneResize=function(){n.viewPortHeight=n.scrollPane.offsetHeight,"production"!==process.env.NODE_ENV&&0===n.viewPortHeight&&console.warn("react-sticky-box's scroll pane has a height of 0. This seems odd. Please check this node:",n.scrollPane),n.scrollPane.firstChild.offsetParent===n.scrollPane?n.scrollPaneOffset=n.scrollPane.getBoundingClientRect().top:n.scrollPaneOffset=0,n.handleScroll()},n.handleParentNodeResize=function(){var e=n.node.parentNode,t=getComputedStyle(e,null),r=parseInt(t.getPropertyValue("padding-top"),10),o=parseInt(t.getPropertyValue("padding-bottom"),10);n.naturalTop=function(e,t){var n=e,r=0;t.firstChild&&t.firstChild.offsetParent!==t&&(r+=e.offsetTop-t.offsetTop,t=e.offsetParent,r+=-e.offsetTop);do{r+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return r}(e,n.scrollPane)+r+n.scrollPaneOffset;var i=n.parentHeight;n.parentHeight=e.getBoundingClientRect().height-(r+o),"relative"===n.mode&&(n.props.bottom?n.changeMode("relative"):i>n.parentHeight&&n.changeToStickyBottomIfBoxTooLow(n.latestScrollY)),i!==n.parentHeight&&"relative"===n.mode&&(n.latestScrollY=Number.POSITIVE_INFINITY,n.handleScroll())},n.handleNodeResize=function(e){var t=(void 0===e?{}:e).initial,r=n.nodeHeight;if(n.nodeHeight=n.node.getBoundingClientRect().height,!t&&r!==n.nodeHeight){var o=n.props,i=o.offsetTop,a=o.offsetBottom,l=o.bottom;if(n.nodeHeight+i+a<=n.viewPortHeight)n.mode=void 0,n.initial();else{var c=r-n.nodeHeight,s=n.parentHeight-n.nodeHeight,u=Math.min(s,n.getCurrentOffset()+(l?c:0));n.offset=Math.max(0,u),l&&"stickyBottom"===n.mode||n.changeMode("relative")}}},n.handleScroll=function(){var e=n.props,t=e.offsetTop,r=e.offsetBottom,o=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop;if(o!==n.latestScrollY){if(n.nodeHeight+t+r<=n.viewPortHeight)return n.initial(),void(n.latestScrollY=o);var i=o-n.latestScrollY;n.offset=n.getCurrentOffset(),i>0?"stickyTop"===n.mode?o+n.scrollPaneOffset+t>n.naturalTop&&(o+n.scrollPaneOffset+n.viewPortHeight<=n.naturalTop+n.nodeHeight+n.offset+r?n.changeMode("relative"):n.changeMode("stickyBottom")):"relative"===n.mode&&n.changeToStickyBottomIfBoxTooLow(o):"stickyBottom"===n.mode?n.scrollPaneOffset+o+n.viewPortHeight<n.naturalTop+n.parentHeight+r&&(n.scrollPaneOffset+o+t>=n.naturalTop+n.offset?n.changeMode("relative"):n.changeMode("stickyTop")):"relative"===n.mode&&n.scrollPaneOffset+o+t<n.naturalTop+n.offset&&n.changeMode("stickyTop"),n.latestScrollY=o}},t.offset&&"production"!==process.env.NODE_ENV&&console.warn('react-sticky-box\'s "offset" prop is deprecated. Please use "offsetTop" instead. It\'ll be removed in v0.8.'),n.unsubscribes=[],n}Fr(t,e);var n=t.prototype;return n.changeMode=function(e){var t=this.props,n=t.onChangeMode,r=t.offsetTop,o=t.offsetBottom,i=t.bottom;if(this.mode!==e&&n(this.mode,e),this.mode=e,"relative"===e)if(this.node.style.position="relative",i){var a=Math.max(0,this.parentHeight-this.nodeHeight-this.offset);this.node.style.bottom=a+"px"}else this.node.style.top=this.offset+"px";else this.node.style.position=qr,"stickyBottom"===e?i?this.node.style.bottom=o+"px":this.node.style.top=this.viewPortHeight-this.nodeHeight-o+"px":i?this.node.style.bottom=this.viewPortHeight-this.nodeHeight-o+"px":this.node.style.top=r+"px";this.offset=this.getCurrentOffset()},n.initial=function(){this.props.bottom?"stickyBottom"!==this.mode&&this.changeMode("stickyBottom"):"stickyTop"!==this.mode&&this.changeMode("stickyTop")},n.changeToStickyBottomIfBoxTooLow=function(e){var t=this.props.offsetBottom;e+this.scrollPaneOffset+this.viewPortHeight>=this.naturalTop+this.nodeHeight+this.offset+t&&this.changeMode("stickyBottom")},n.render=function(){var e=this.props,t=e.children,n=e.className,r=e.style;return React.createElement("div",{className:n,style:r,ref:this.registerContainerRef},t)},t}(React.Component);function $r(e){var t=function(){var e=document.createElement("div");document.head.appendChild(e);var t=window.getComputedStyle(e).backgroundColor;return document.head.removeChild(e),t}(),n=window.getComputedStyle(e).backgroundColor;return n!=t?n:e.parentElement?$r(e.parentElement):t}Qr.defaultProps={onChangeMode:function(){},offsetTop:0,offsetBottom:0},"production"!==process.env.NODE_ENV&&(Qr.propTypes={onChangeMode:G.func,offsetTop:G.number,offsetBottom:G.number,bottom:G.bool});var Zr=function(e){var r=e.align,o=e.gutter,i=n(e,["align","gutter"]),a=Ke("formily-button-group");return React.createElement(antd.Space,t({},i,{size:o,className:at(a,i.className),style:t(t({},i.style),{justifyContent:"left"===r?"flex-start":"right"===r?"flex-end":"center",display:"flex"})}),i.children)};Zr.defaultProps={align:"left"},Zr.FormItem=function(e){var r,o=e.gutter,i=n(e,["gutter"]);return React.createElement(un,t({},i,{label:" ",style:t(t({margin:0,padding:0},i.style),{width:"100%"}),colon:!1}),(null===(r=i.children)||void 0===r?void 0:r.length)?React.createElement(antd.Space,{size:o},i.children):i.children)},(Zr.Sticky=function(e){var r=e.align,o=n(e,["align"]),a=React.useRef(),l=i(React.useState("transparent"),2),c=l[0],s=l[1],u=Ke("formily-button-group");return React.useLayoutEffect((function(){if(a.current){var e=$r(a.current);e!==c&&s(e)}})),React.createElement(Qr,t({},o,{className:at("".concat(u,"-sticky"),o.className),style:t({backgroundColor:c},o.style),bottom:!0}),React.createElement("div",{ref:a,className:"".concat(u,"-sticky-inner"),style:t(t({},o.style),{justifyContent:"left"===r?"flex-start":"right"===r?"flex-end":"center"})},o.children))}).defaultProps={align:"left"};var eo=Formily.React.connect(antd.Input,Formily.React.mapProps((function(e,n){return t(t({},e),{suffix:React.createElement("span",null,(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffix)})})),Formily.React.mapReadPretty(ln.Input));eo.TextArea=Formily.React.connect(antd.Input.TextArea,Formily.React.mapReadPretty(ln.Input));var to=function(e){return e>=48&&e<=57},no=function(e){return e>=97&&e<=122},ro=function(e){return e>=65&&e<=90},oo=function(e){return!(no(e)||ro(e)||to(e))},io=function(e){return no(e)||ro(e)},ao=function(e){return Formily.Shared.isFn(e.children)?e.children(function(e){if(!e)return 0;for(var t=0,n=0,r=0,o=0,i=0,a=0,l=0,c=0,s=0,u=function(){return t+n+r+o},d=0;d<e.length;d++){var f=e.charCodeAt(d);to(f)?(t++,0!==d&&d!==e.length-1&&i++,d>0&&to(e.charCodeAt(d-1))&&c++):no(f)?(n++,d>0&&no(e.charCodeAt(d-1))&&c++):ro(f)?(r++,d>0&&ro(e.charCodeAt(d-1))&&c++):(o++,0!==d&&d!==e.length-1&&i++);for(var m=!1,p=0;p<e.length;p++)e[d]===e[p]&&d!==p&&(m=!0,l+=Math.abs(e.length/(p-d)));if(m){a++;var v=e.length-a;l=v?Math.ceil(l/v):Math.ceil(l)}if(d>1){var h=e.charCodeAt(d-1),y=e.charCodeAt(d-2);if(io(f)){if(io(h)&&io(y)){var g=e.toLowerCase(),b=g.charCodeAt(d),R=g.charCodeAt(d-1);b-R==R-g.charCodeAt(d-2)&&1===Math.abs(b-R)&&s++}}else to(f)?to(h)&&to(y)&&f-h==h-y&&1===Math.abs(f-h)&&s++:oo(h)&&oo(y)&&f-h==h-y&&1===Math.abs(f-h)&&s++}}var w,x=0,E=u();return x+=4*E,n>0&&(x+=2*(E-n)),r>0&&(x+=2*(E-r)),t!==E&&(x+=4*t),x+=6*o,x+=2*i,x+=2*(w=t>0?1:0,w+=n>0?1:0,w+=r>0?1:0,(w+=o>0?1:0)>2&&u()>=8?w+1:0),E===n+r&&(x-=E),E===t&&(x-=t),x-=l,x-=2*c,(x=(x=(x-=3*s)<0?0:x)>100?100:x)>=80?100:x>=60?80:x>=40?60:x>=20?40:20}(String(e.value))):React.createElement(React.Fragment,null,e.children)},lo=Formily.React.connect((function(e){var r=e.value,o=e.className,i=e.checkStrength,a=n(e,["value","className","checkStrength"]),l={position:"absolute",zIndex:1,height:8,top:0,background:"#fff",width:1,transform:"translate(-50%, 0)"};return React.createElement("span",{className:o},React.createElement(antd.Input.Password,t({},a,{value:r})),i&&React.createElement(ao,{value:String(r)},(function(e){return React.createElement("div",{style:{background:"#e0e0e0",marginBottom:3,position:"relative"}},React.createElement("div",{style:t(t({},l),{left:"20%"})}),React.createElement("div",{style:t(t({},l),{left:"40%"})}),React.createElement("div",{style:t(t({},l),{left:"60%"})}),React.createElement("div",{style:t(t({},l),{left:"80%"})}),React.createElement("div",{style:{position:"relative",backgroundImage:"-webkit-linear-gradient(left, #ff5500, #ff9300)",transition:"all 0.35s ease-in-out",height:8,width:"100%",marginTop:5,clipPath:"polygon(0 0,".concat(e,"% 0,").concat(e,"% 100%,0 100%)")}}))})))}),Formily.React.mapReadPretty(ln.Input)),co=Formily.React.connect(antd.Cascader,Formily.React.mapProps({dataSource:"options"},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(ln.Cascader)),so=Formily.React.connect(antd.Radio,Formily.React.mapProps({value:"checked",onInput:"onChange"}));so.__ANT_RADIO=!0,so.Group=Formily.React.connect(antd.Radio.Group,Formily.React.mapProps({dataSource:"options"}),Formily.React.mapReadPretty(ln.Select));var uo=Formily.React.connect(antd.Checkbox,Formily.React.mapProps({value:"checked",onInput:"onChange"}));uo.__ANT_CHECKBOX=!0,uo.Group=Formily.React.connect(antd.Checkbox.Group,Formily.React.mapProps({dataSource:"options"}),Formily.React.mapReadPretty(ln.Select,{mode:"tags"}));var fo=Formily.React.connect(antd.Select,Formily.React.mapProps({dataSource:"options",loading:!0},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(ln.Select)),mo=Formily.React.connect(antd.TreeSelect,Formily.React.mapProps({dataSource:"treeData"},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(ln.TreeSelect)),po=Formily.React.connect(antd.Transfer,Formily.React.mapProps({value:"targetKeys"},(function(e,n){var r;return Formily.Core.isVoidField(n)?e:t(t({},e),{dataSource:(null===(r=n.dataSource)||void 0===r?void 0:r.map((function(e){return t(t({},e),{title:e.title||e.label,key:e.key||e.value})})))||[]})})));po.defaultProps={render:function(e){return e.title}};var vo=function(){return function(e){var n=e.format||function(e){return"month"===e.picker?"YYYY-MM":"quarter"===e.picker?"YYYY-\\QQ":"year"===e.picker?"YYYY":"week"===e.picker?"gggg-wo":e.showTime?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}(e),r=e.onChange;return t(t({},e),{format:n,value:Xe(e.value,"gggg-wo"===n?"gggg-ww":n),onChange:function(e){r&&r(He(e,n))}})}},ho=Formily.React.connect(antd.DatePicker,Formily.React.mapProps(vo()),Formily.React.mapReadPretty(ln.DatePicker));ho.RangePicker=Formily.React.connect(antd.DatePicker.RangePicker,Formily.React.mapProps(vo()),Formily.React.mapReadPretty(ln.DateRangePicker));var yo=function(){return function(e){var n=e.format||"HH:mm:ss",r=e.onChange;return t(t({},e),{format:n,value:Xe(e.value,n),onChange:function(e){r&&r(He(e,n))}})}},go=Formily.React.connect(antd.TimePicker,Formily.React.mapProps(yo()),Formily.React.mapReadPretty(ln.TimePicker));go.RangePicker=Formily.React.connect(antd.TimePicker.RangePicker,Formily.React.mapProps(yo()),Formily.React.mapReadPretty(ln.TimeRangePicker));var bo=Formily.React.connect(antd.InputNumber,Formily.React.mapReadPretty(ln.NumberPicker)),Ro=Formily.React.connect(antd.Switch,Formily.React.mapProps({value:"checked"},(function(e){var n=e.onChange;return delete e.value,t(t({},e),{onChange:function(e){null==n||n(e,null)}})}))),wo=[{ext:/\.docx/i,icon:"//img.alicdn.com/tfs/TB1n8jfr1uSBuNjy1XcXXcYjFXa-200-200.png"},{ext:/\.pptx/i,icon:"//img.alicdn.com/tfs/TB1ItgWr_tYBeNjy1XdXXXXyVXa-200-200.png"},{ext:/\.jpe?g/i,icon:"//img.alicdn.com/tfs/TB1wrT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.pdf/i,icon:"//img.alicdn.com/tfs/TB1GwD8r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.png/i,icon:"//img.alicdn.com/tfs/TB1BHT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.eps/i,icon:"//img.alicdn.com/tfs/TB1G_iGrVOWBuNjy0FiXXXFxVXa-200-200.png"},{ext:/\.ai/i,icon:"//img.alicdn.com/tfs/TB1B2cVr_tYBeNjy1XdXXXXyVXa-200-200.png"},{ext:/\.gif/i,icon:"//img.alicdn.com/tfs/TB1DTiGrVOWBuNjy0FiXXXFxVXa-200-200.png"},{ext:/\.svg/i,icon:"//img.alicdn.com/tfs/TB1uUm9rY9YBuNjy0FgXXcxcXXa-200-200.png"},{ext:/\.xlsx?/i,icon:"//img.alicdn.com/tfs/TB1any1r1OSBuNjy0FdXXbDnVXa-200-200.png"},{ext:/\.psd?/i,icon:"//img.alicdn.com/tfs/TB1_nu1r1OSBuNjy0FdXXbDnVXa-200-200.png"},{ext:/\.(wav|aif|aiff|au|mp1|mp2|mp3|ra|rm|ram|mid|rmi)/i,icon:"//img.alicdn.com/tfs/TB1jPvwr49YBuNjy0FfXXXIsVXa-200-200.png"},{ext:/\.(avi|wmv|mpg|mpeg|vob|dat|3gp|mp4|mkv|rm|rmvb|mov|flv)/i,icon:"//img.alicdn.com/tfs/TB1FrT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.(zip|rar|arj|z|gz|iso|jar|ace|tar|uue|dmg|pkg|lzh|cab)/i,icon:"//img.alicdn.com/tfs/TB10jmfr29TBuNjy0FcXXbeiFXa-200-200.png"},{ext:/\.[^.]+/i,icon:"//img.alicdn.com/tfs/TB10.R4r3mTBuNjy1XbXXaMrVXa-200-200.png"}],xo=function(e,t){return t&&Formily.Shared.isArr(t.include)?t.include.some((function(t){return e.test(t)})):!t||!Formily.Shared.isArr(t.exclude)||!t.exclude.some((function(t){return e.test(t)}))},Eo=function(e,t){for(var n=0;n<wo.length;n++)if(wo[n].ext.test(e)&&xo(wo[n].ext,t))return wo[n].icon||e;return e},So=function(e){return(null==e?void 0:e.url)||(null==e?void 0:e.downloadURL)||(null==e?void 0:e.imgURL)},Fo=function(e){return(null==e?void 0:e.thumbUrl)||(null==e?void 0:e.url)||(null==e?void 0:e.downloadURL)||(null==e?void 0:e.imgURL)},Co=function(e){return(null==e?void 0:e.errorMessage)||(null==e?void 0:e.errMsg)||(null==e?void 0:e.errorMsg)||(null==e?void 0:e.message)||("string"==typeof(null==e?void 0:e.error)?e.error:"")},Oo=function(e){return!1===(null==e?void 0:e.success)||!0===(null==e?void 0:e.failed)||(null==e?void 0:e.error)?"error":(null==e?void 0:e.state)||(null==e?void 0:e.status)},ko=function(e){return e&&e.length?e.map((function(e,n){return t(t({},e),{uid:e.uid||"".concat(n),status:Oo(e.response)||Oo(e),url:So(e)||So(null==e?void 0:e.response),thumbUrl:Eo(Fo(e)||Fo(null==e?void 0:e.response),{exclude:[".png",".jpg",".jpeg",".gif"]})})})):[]},To=function(e){var t,n;void 0===e&&(e="Upload Service Error"),t=function(t){for(var n,r,o=Formily.Shared.toArr(t),i=0;i<o.length;i++)if("error"===(null===(n=o[i])||void 0===n?void 0:n.status))return Co(null===(r=o[i])||void 0===r?void 0:r.response)||Co(o[i])||e},n=Formily.React.useField(),React.useEffect((function(){var e=Formily.Reactive.reaction((function(){return n.value}),(function(e){var r=t(e);n.setFeedback({type:"error",code:"UploadError",messages:r?[r]:[]})}));return function(){e()}}),[])};function Po(e){var r=e.serviceErrorMessage,o=n(e,["serviceErrorMessage"]);To(r);return t(t({},o),{fileList:ko(o.fileList),onChange:function(e){var t;null===(t=o.onChange)||void 0===t||t.call(o,ko(a([],i(e.fileList))))}})}var No=Formily.React.connect((function(e){return React.createElement(antd.Upload,t({},Po(e)),e.children||function(e){return"picture-card"!==e.listType?React.createElement(antd.Button,null,React.createElement(icons.UploadOutlined,null),e.textContent):React.createElement(icons.UploadOutlined,{style:{fontSize:20}})}(e))}),Formily.React.mapProps({value:"fileList"})),Ao=Formily.React.connect((function(e){return React.createElement("div",{className:Ke("upload-dragger")},React.createElement(antd.Upload.Dragger,t({},Po(e)),e.children||React.createElement(React.Fragment,null,React.createElement("p",{className:"ant-upload-drag-icon"},React.createElement(icons.InboxOutlined,null)),e.textContent&&React.createElement("p",{className:"ant-upload-text"},e.textContent))))}),Formily.React.mapProps({value:"fileList"}));No.Dragger=Ao;var _o=Formily.React.observer((function(e){var r=e.onSubmit,o=e.onSubmitFailed,i=e.onSubmitSuccess,a=n(e,["onSubmit","onSubmitFailed","onSubmitSuccess"]),l=Formily.React.useParentForm();return React.createElement(antd.Button,t({htmlType:r?"button":"submit",type:"primary"},a,{loading:void 0!==a.loading?a.loading:l.submitting,onClick:function(e){a.onClick&&!1===a.onClick(e)||r&&l.submit(r).then(i).catch(o)}}),a.children)}),{forwardRef:!0}),Io=function(){var e,t,n=Formily.React.useField();return(null===(e=null==n?void 0:n.parent)||void 0===e?void 0:e.pattern)||(null===(t=null==n?void 0:n.form)||void 0===t?void 0:t.pattern)},Mo=Formily.React.observer((function(e){var n=i(function(){var e=Io(),t=Formily.React.useField();return React.useLayoutEffect((function(){if("editable"===e)return t.setPattern("readPretty")}),[e]),["editable"===t.pattern,function(n){"editable"===e&&t.setPattern(n?"editable":"readPretty")}]}(),2),r=n[0],o=n[1],a=Io(),l=function(){var e=Formily.React.useField();return Formily.Core.isVoidField(e)?{}:e?{feedbackStatus:"validating"===e.validateStatus?"pending":e.validateStatus,feedbackText:e.selfErrors.length?e.selfErrors:e.selfWarnings.length?e.selfWarnings:e.selfSuccesses.length?e.selfSuccesses:void 0,extra:e.description}:{}}(),c=Formily.React.useField(),s=Ke(),u=Ke("formily-editable"),d=React.useRef(),f=React.useRef(),m=function(){var e;d.current&&!(null===(e=null==c?void 0:c.errors)||void 0===e?void 0:e.length)&&o(!1)};!function(e,t,n){void 0===n&&(n="click");var r=React.useRef(e);r.current=e,React.useEffect((function(){var e=function(e){(Array.isArray(t)?t:[t]).some((function(t){var n=function(e,t){return e?"function"==typeof e?e():"current"in e?e.current:e:t}(t);return!n||(null==n?void 0:n.contains(e.target))}))||r.current(e)};return document.addEventListener(n,e),function(){document.removeEventListener(n,e)}}),[t,n])}((function(e){var t=e.target;(null==t?void 0:t.closest(".".concat(s,"-select-dropdown")))||(null==t?void 0:t.closest(".".concat(s,"-picker-dropdown")))||(null==t?void 0:t.closest(".".concat(s,"-cascader-menus")))||m()}),f);return d.current=r,React.createElement("div",{className:u,ref:f,onClick:function(e){var t=e.target,n=f.current.querySelector(".".concat(u,"-close-btn"));(null==t?void 0:t.contains(n))||(null==n?void 0:n.contains(t))?m():d.current||setTimeout((function(){o(!0),setTimeout((function(){var e;null===(e=f.current.querySelector("input"))||void 0===e||e.focus()}))}))}},React.createElement("div",{className:"".concat(u,"-content")},React.createElement(un,t({},e,l),e.children),function(){if(!r)return React.createElement(un,t({},e,l),"editable"===a&&React.createElement(icons.EditOutlined,{className:"".concat(u,"-edit-btn")}),"editable"!==a&&React.createElement(icons.MessageOutlined,{className:"".concat(u,"-edit-btn")}))}(),function(){if(r)return React.createElement(un,t({},e),React.createElement(icons.CloseOutlined,{className:"".concat(u,"-close-btn")}))}()))}));function jo(e,t){return function(e){if(Formily.Shared.isArr(e))return e;return void 0!==e?[e]:[]}(e).join("").toUpperCase().includes(t)}Mo.Popover=Formily.React.observer((function(e){var n=Formily.React.useField(),a=Io(),l=i(React.useState(!1),2),c=l[0],s=l[1],u=Ke("formily-editable");return React.createElement(antd.Popover,t({},e,{title:e.title||n.title,visible:c,className:at(u,e.className),content:e.children,trigger:"click",destroyTooltipOnHide:!0,onVisibleChange:function(e){e?s(!0):r(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,n.form.validate("".concat(n.address,".*"))];case 1:return t.sent(),[3,3];case 2:return(null==(e=n.form.queryFeedbacks({type:"error",address:"".concat(n.address,".*")}))?void 0:e.length)?[2]:(s(!1),[7]);case 3:return[2]}}))}))}}),React.createElement("div",null,React.createElement(un,{className:"".concat(u,"-trigger")},React.createElement("div",{className:"".concat(u,"-content")},React.createElement("span",{className:"".concat(u,"-preview")},e.title||n.title),"editable"===a&&React.createElement(icons.EditOutlined,{className:"".concat(u,"-edit-btn")}),"editable"!==a&&React.createElement(icons.MessageOutlined,{className:"".concat(u,"-edit-btn")})))))}));var Bo=function(e,n,r,o){return React.useMemo((function(){if(!n||!1===r)return e;var i=Formily.Shared.isFn(r)?r:function(e,t){return function(e,t){var n=new Set,r=function(e){return Object.keys(e||{}).some((function(o){if("__level"===o)return!1;var i=e[o];return!React.isValidElement(i)&&"children"!==o&&!n.has(i)&&("object"==typeof i?(n.add(i),r(i)):jo(i,t))}))};return r(e)}(t,e.toUpperCase())},a=function(e){var r=[];return null==e||e.forEach((function(e){var l;if(null===(l=null==e?void 0:e.children)||void 0===l?void 0:l.length){var c=a(e.children);c.length?r.push(t(t({},e),{children:c})):i(n,e)&&!1!==o&&r.push(t(t({},e),{children:[]}))}else i(n,e)&&r.push(e)})),r};return a(e)}),[e,n,r])},Do=function(e){var t=function(e){var n=[];return null==e||e.forEach((function(e){var r;n=a(a([],i(n)),[e]),(null===(r=null==e?void 0:e.children)||void 0===r?void 0:r.length)&&(n=a(a([],i(n)),i(t(e.children))))})),n};return t(e)},zo=function(e,t){return Formily.Shared.isArr(e)?e.reduce((function(e,n){return(null==n?void 0:n.disabled)?e:a(a(a([],i(e)),[n[t]]),i(zo(null==n?void 0:n.children,t)))}),[]):[]},Lo=function(e,t,n){var r=a(a([],i(zo(e,n))),i(t));return a([],i(new Set(r))).length!==r.length},Wo=function(e,t,n){void 0===e&&(e=[]);var r=a([],i(t));return e.forEach((function(e){var t;(null===(t=e.children)||void 0===t?void 0:t.length)&&(r=Wo(e.children,r,n),!function(e,t,n){var r=e.filter((function(e){return!(null==e?void 0:e.disabled)}));return r.filter((function(e){return null==t?void 0:t.includes(e[n])})).length===r.length}(e.children,r,n)?r=r.filter((function(t){return t!==e[n]})):(null==e?void 0:e.disabled)||(r=a([],i(new Set(a(a([],i(r)),[e[n]]))))))})),r},Vo=function(e,n,r){void 0===e&&(e=[]);var o=[];return e.forEach((function(e){var i=Vo(e.children,n,r);(i.length||(null==n?void 0:n.includes(e[r])))&&o.push(t(t({},e),i.length?{children:i}:{}))})),o},Xo=function(e,n){return e.map((function(e){var r,o=t({},e);return delete o[n],(null===(r=o.children)||void 0===r?void 0:r.length)&&(o.children=Xo(o.children,n)),o}))},Ho=function(e,t,n,r,o){if(!n.length)return!1;var i=e.filter((function(e){return n.includes(e)}));return(!1!==r?i:Wo(t,i,o)).length===n.length},Go=function(e,t,n,r,o,l,c,s){return function(){var u=Boolean((null==e?void 0:e.length)&&(null==e?void 0:e.length)===t.filter((function(e){return!e.disabled})).length),d=Boolean((null==e?void 0:e.length)&&!u);return React.createElement(antd.Checkbox,{key:"titleAddons",disabled:o,checked:u,indeterminate:d,onChange:function(o){if(!l){var u=o.target.checked,d=n.filter((function(e){return!e.disabled})).map((function(e){return null==e?void 0:e[r]}));Ho(e,n,d,c,r)&&(u=!1);var f=[];f=u?a([],i(new Set(a(a([],i(e)),i(d))))):e.filter((function(e){return!d.includes(e)})),f=Wo(t,f,r),null==s||s(f)}}})}},Ko=function(e,t,n,r){if(!(null==n?void 0:n.includes(e[r]))){var o=t.find((function(t){return t[r]===e[r]}));return Lo(o.children,n,r)||void 0}},Yo=antd.Input.Search,qo=function(e,n,r){return e.map((function(e){var o,i=Formily.Shared.isArr(e.children)?qo(e.children,n,r):{};return t(t(t({},e),i),((o={})[r]=n(e),o))}))},Uo=Formily.React.observer((function(e){var r,o,l=e.mode,c=e.dataSource,s=e.optionAsValue,u=e.valueType,d=e.showSearch,f=e.filterOption,m=e.filterSort,p=e.onSearch,v=e.searchProps,h=e.className,y=e.value,g=e.onChange,b=e.rowSelection,R=e.primaryKey,w=n(e,["mode","dataSource","optionAsValue","valueType","showSearch","filterOption","filterSort","onSearch","searchProps","className","value","onChange","rowSelection","primaryKey"]),x=Ke("formily-select-table",e),E=i(React.useState(),2),S=E[0],F=E[1],C=Formily.React.useField(),O=Formily.Shared.isBool(e.loading)?e.loading:C.loading,k=C.disabled,T=C.readOnly,P=C.readPretty,N=function(e,t,n){void 0===e&&(e="default");var r={small:{searchSize:"small",tableSize:"small"},default:{searchSize:"middle",tableSize:"middle"},large:{searchSize:"large",tableSize:"default"}}[e],o=r.searchSize,i=r.tableSize;return{searchSize:t||o,tableSize:n||i}}(null===(r=C.decoratorProps)||void 0===r?void 0:r.size,null==v?void 0:v.size,null==e?void 0:e.size),A=N.searchSize,_=N.tableSize,I=Formily.Shared.isFn(R)?"__formily_key__":R,M=function(){var e=Formily.React.useFieldSchema(),n=[],r="array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)?e.items:e;return null==r||r.mapProperties((function(e,r){if(function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Column"))>-1}(e)){var o=null==e?void 0:e["x-component-props"];n.push(t(t({},o),{title:(null==o?void 0:o.title)||(null==e?void 0:e.title),dataIndex:(null==o?void 0:o.dataIndex)||r}))}})),n}(),j=Formily.Shared.isArr(c)?c:C.dataSource;j=Formily.Shared.isFn(R)?qo(j,R,I):j;var B=Bo(j,S,f,null==b?void 0:b.checkStrictly),D=React.useMemo((function(){return m?a([],i(B)).sort((function(e,t){return m(e,t)})):B}),[B,m]),z=Do(j),L=Do(B),W=function(e,t,n,r,o,l,c,s){var u=!1!==c?"all":r,d="path"!==u&&o,f="single"===l?[e]:Formily.Shared.isArr(e)?e:[];f=d&&"path"!==u?f.map((function(e){return Formily.Shared.isFn(s)?s(e):null==e?void 0:e[n]})):f;var m=[];if("parent"===u){var p=t.filter((function(e){return f.includes(e[n])})),v=[];p.forEach((function(e){v=a(a([],i(v)),i(zo(e.children,n)))})),m=a([],i(new Set(a(a([],i(f)),i(v)))))}else if("child"===u)m=Wo(t,f,n);else if("path"===u){var h=Do(f).map((function(e){return e[n]}));m=Wo(t,h,n)}else m=a([],i(f));return m}(y,z,I,u,s,l,null==b?void 0:b.checkStrictly,R),V=Bo(D,W,(function(e,t){return e.includes(t[I])})),X=function(e){var t=(e||"").trim();F(e),null==p||p(t)},H=function(e){if(!T){var t=function(){if(s&&"multiple"===l&&(null==y?void 0:y.length)){var e=new Map;return a(a([],i(z)),i(y)).forEach((function(t){e.has(t[I])||e.set(t[I],t)})),a([],i(e.values()))}return z}().filter((function(t){return e.includes(null==t?void 0:t[I])})),n=function(e,t,n,r,o,l,c,s){var u=!1!==s?"all":o,d="path"!==u&&l,f=[],m=[];if("parent"===u){var p=[];t.forEach((function(e){p=a(a([],i(p)),i(zo(e.children,r)))})),f=e.filter((function(e){return!p.includes(e)})),m=t.filter((function(e){return f.includes(e[r])}))}else"child"===u?(f=a([],i(e)),(m=a([],i(t))).forEach((function(t){Lo(t.children,e,r)&&(f=f.filter((function(e){return e!==t[r]})),m=m.filter((function(e){return e[r]!==t[r]})))}))):"path"===u?(f=Vo(n,e,r),m=a([],i(t))):(f=a([],i(e)),m=a([],i(t)));return m=Xo(m,"__formily_key__"),f=d&&"path"!==u?m:f,"single"===c&&(f=f[0],m=m[0]),{outputValue:f,outputOptions:m}}(e,t,j,I,u,s,l,null==b?void 0:b.checkStrictly),r=n.outputValue,o=n.outputOptions;null==g||g(r,o)}},G=function(e){var t=function(e,t,n,r,o,l){var c=e.length>t.length,s=a(a([],i(e)),i(t)).find((function(n){return!(e.includes(n)&&t.includes(n))})),u=r.find((function(e){return e[o]===s})),d=zo(u.children,o);Ho(t,u.children,d,l,o)&&(c=!1);var f=[];return f=c?a([],i(new Set(a(a(a([],i(t)),[s]),i(d))))):t.filter((function(e){return!a([s],i(d)).includes(e)})),{selectedRowKeys:f=Wo(n,f,o)}}(e,W,z,L,I,null==b?void 0:b.checkStrictly).selectedRowKeys;H(t)},K=function(e,t,n,r,o,i,a,l,c){return"single"===o?{}:{columnTitle:Go(e,t,n,r,i,a,l,c)}}(W,z,L,I,l,k,T,null==b?void 0:b.checkStrictly,H),Y=null===(o={multiple:"checkbox",single:"radio"})||void 0===o?void 0:o[l];return React.createElement("div",{className:x},d?React.createElement(Yo,t({},v,{className:at("".concat(x,"-search"),null==v?void 0:v.className),style:t({width:"100%"},null==v?void 0:v.style),onSearch:X,onChange:function(e){return X(e.target.value)},disabled:k,readOnly:T,size:A,loading:O})):null,React.createElement(antd.Table,t({},w,{className:at("".concat(x,"-table"),h),dataSource:P?V:D,rowSelection:P?void 0:t(t(t(t(t({},b),K),{getCheckboxProps:function(e){var n;return t(t({},null===(n=null==b?void 0:b.getCheckboxProps)||void 0===n?void 0:n.call(b,e)),{disabled:k||(null==e?void 0:e.disabled)})}}),!1!==(null==b?void 0:b.checkStrictly)?{}:{renderCell:function(e,t,n,r){return React.cloneElement(r,{indeterminate:Ko(t,z,W,I)})}}),{selectedRowKeys:W,onChange:!1!==(null==b?void 0:b.checkStrictly)?H:G,type:Y,preserveSelectedRowKeys:!0,checkStrictly:!0}),columns:e.columns||M,rowKey:I,loading:O,size:_,onRow:function(e){var n,r=null===(n=w.onRow)||void 0===n?void 0:n.call(w,e);return t(t({},r),{onClick:function(t){var n;null===(n=null==r?void 0:r.onClick)||void 0===n||n.call(r,t),function(e){if(!(P||k||T||(null==e?void 0:e.disabled))){var t=null==e?void 0:e[I],n=null==W?void 0:W.includes(t),r=[];r="single"===l?[t]:n?W.filter((function(e){return e!==t})):a(a([],i(W)),[t]),!1!==(null==b?void 0:b.checkStrictly)?H(r):G(r)}}(e)}})}}),""))}));Uo.Column=function(){return React.createElement(React.Fragment,null)},Uo.defaultProps={showSearch:!1,valueType:"all",primaryKey:"key",mode:"multiple"},e.ArrayBase=mt,e.ArrayCards=Pt,e.ArrayCollapse=jt,e.ArrayItems=Lt,e.ArrayTable=St,e.ArrayTabs=Ct,e.BaseItem=un,e.Cascader=co,e.Checkbox=uo,e.DatePicker=ho,e.Editable=Mo,e.Form=cn,e.FormButtonGroup=Zr,e.FormCollapse=Er,e.FormDialog=Vt,e.FormDrawer=Ht,e.FormGrid=yr,e.FormItem=dn,e.FormLayout=$t,e.FormLayoutDeepContext=Yt,e.FormLayoutShallowContext=qt,e.FormStep=fn,e.FormTab=wr,e.GridColumn=gr,e.Input=eo,e.NumberPicker=bo,e.Password=lo,e.PreviewText=ln,e.Radio=so,e.Reset=function(e){var r=e.forceClear,o=e.validate,i=e.onResetValidateSuccess,a=e.onResetValidateFailed,l=n(e,["forceClear","validate","onResetValidateSuccess","onResetValidateFailed"]),c=Formily.React.useParentForm();return React.createElement(antd.Button,t({},l,{onClick:function(e){l.onClick&&!1===l.onClick(e)||c.reset("*",{forceClear:r,validate:o}).then(i).catch(a)}}),l.children)},e.Select=fo,e.SelectTable=Uo,e.Space=function(e){var n,r=Qt();return React.createElement(antd.Space,t({size:null!==(n=e.size)&&void 0!==n?n:null==r?void 0:r.spaceGap},e))},e.Submit=_o,e.Switch=Ro,e.TimePicker=go,e.Transfer=po,e.TreeSelect=mo,e.Upload=No,e.createFormGrid=mr,e.useFormDeepLayout=Ut,e.useFormGrid=pr,e.useFormLayout=Qt,e.useFormShallowLayout=Jt,e.useGridColumn=hr,e.useGridSpan=vr,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=formily.antd.umd.production.js.map
